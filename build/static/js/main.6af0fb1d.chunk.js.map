{"version":3,"sources":["added.png","removed.png","changed.png","point_to_polygon.png","point_count_changed.png","geometry_shifted.png","no_change.png","Status.js","StatsBar.js","CountryPopup.js","MyMap.js","Changed.js","PAPopup.js","PAPopupList.js","AppBar.js","StatusCheckbox.js","FooterBar.js","Trends.js","App.js","serviceWorker.js","index.js","genericFunctions.js"],"names":["module","exports","Status","classname","this","props","status","text","title","amount","toLocaleString","amountSpan","iconOnly","style","fontSize","paddingLeft","className","undefined","display","hide","paddingRight","rightPadding","React","Component","StatsBar","spacer","spacing","values","total","showStatuses","indexOf","added","removed","changed","CountryPopup","clickCountryPopup","country","name","onClick","bind","length","substr","INITIAL_CENTER","INITIAL_FILTER","CIRCLE_RADIUS_STOPS","P_TO_CHANGED_GEOMETRY","P_TO_CHANGED_GEOMETRY_LINE","P_SELECTED_POINT","P_SELECTED_LINE","P_SELECTED_POLYGON","MyMap","state","popups","mapboxgl","accessToken","map","Map","container","window","MAP_STYLE_DEFAULT","center","zoom","setMap","mapLoadedEvent","mapLoaded","on","off","addToLayers","mapStyleLoaded","prevProps","prevState","toVersion","id","fromVersion","getSource","SRC_FROM_POLYGONS","addToChangeLayers","addFromLayers","removeToChangeLayers","removeFromLayers","unfilterNoChangeLayers","removePopups","view","global_summary","iso3s","forEach","push","iso3","addCountryPopup","filterToVersionByCountries","country_summary","filterCountryLayers","_from","key","addSource","source","type","tiles","TILES_PREFIX","TILES_SUFFIX","SRC_FROM_POINTS","addLayer","LYR_FROM_DELETED_POLYGON","sourceId","sourceLayer","layout","visibility","paint","filter","beforeID","LYR_TO_POLYGON","LYR_FROM_DELETED_POINT","LYR_FROM_GEOMETRY_POINT_TO_POLYGON","beforeId","LYR_TO_GEOMETRY_POINT_TO_POLYGON","LYR_FROM_GEOMETRY_POINT_COUNT_CHANGED_LINE","LYR_FROM_GEOMETRY_SHIFTED_LINE","LYR_FROM_SELECTED_POLYGON","LYR_TO_SELECTED_POLYGON","LYR_FROM_SELECTED_LINE","LYR_FROM_SELECTED_POINT","removeSource","_to","attribution","year","SRC_TO_POLYGONS","SRC_TO_POINTS","LYR_TO_POINT","LYR_TO_SELECTED_LINE","LYR_TO_SELECTED_POINT","e","console","log","LYR_TO_CHANGED_ATTRIBUTE","LYR_TO_GEOMETRY_POINT_TO_POLYGON_LINE","LYR_TO_GEOMETRY_POINT_COUNT_CHANGED_POLYGON","LYR_TO_GEOMETRY_POINT_COUNT_CHANGED_POLYGON_LINE","LYR_TO_GEOMETRY_SHIFTED_POLYGON","LYR_TO_GEOMETRY_SHIFTED_POLYGON_LINE","LYR_TO_NEW_POLYGON","LYR_TO_NEW_POINT","isStyleLoaded","statuses","layers","layer","getLayer","removeLayer","no_change_status","setFilter","details","getStyle","hasOwnProperty","setLayoutProperty","visible","countryPopup","placeholder","document","createElement","ReactDOM","render","Popup","closeButton","closeOnClick","setLngLat","centroid","setDOMContent","addTo","popup","remove","concat","toPolygonsFilter","toPointsFilter","addedPAs","removedPAs","changedPAs","geometryShiftedPAs","geometryPointCountChangedPAs","geometryPointToPolygonPAs","geometryChangedPAs","record","wdpa_pids","Changed","row","original","previous","current","changedData","find","item","geometryData","attributesData","Fragment","showPagination","minRows","data","columns","Header","accessor","headerStyle","Cell","renderFrom","renderTo","PAPopup","feature","properties","country_pa_diffs","previous_feature","pa_data","pa","wdpa_pid","geometry_change","querySourceFeatures","from","attribute_change","attribute","dataForPopup","children","link","left","point","x","top","y","features","href","target","rel","getFeatureStatus","getChangedData","showingChange","Object","keys","onMouseEnter","onMouseEnterPAPopup","onMouseLeave","onMouseLeavePAPopup","PAPopupList","dataForPopupList","showPAPopup","desig","onMouseEnterPAPopuplist","onMouseLeavePAPopuplist","Range","createSliderWithTooltip","Slider","AppBar","zoomOutMap","showTrends","onBeforeChange","onChange","marks","versions","divisions","width","version","shortTitle","margin","max","step","count","value","trackStyle","shiftDown","backgroundColor","handleStyle","titleAccess","gettingCountryStats","gettingGlobalStats","globalTotal","globalStats","countryTotal","countryStats","color","IconButton","aria-label","size","StatusCheckbox","handleStatusChange","img","point_to_polygon","point_count_changed","geometry_shifted","no_change","src","alt","checked","for","short_text","FooterBar","present","Trends","renderLineChart","height","global_trends","dataKey","stroke","label","angle","dy","domain","tickFormatter","dx","REST_BASE_URL","hightlightRules","highlightLayers","paintPropertyFrom","App","sliderValues","mouseOverPAPopup","mouseOverPAPopuplist","PAPopuptimer","PAPopupListtimer","wdpa_pidsUnderMouse","getVersions","keyDownEventListener","handleKeyDown","addEventListener","keyUpEventListener","handleKeyUp","removeEventListener","initialBounds","getBounds","getDateArray","then","dateArray","wmtsValid","index","dateFormat","_date","toLowerCase","setState","setFromToVersions","Promise","resolve","reject","d","Date","today","callCount","getTime","setMonth","getMonth","url","fetch","response","prevMin","prevMax","prevDiff","vals","Number","newMin","newMax","setSliderValues","getGlobalTotal","showUnchanged","getCountryTotal","getGlobalDiffStats","getCountriesDiffStats","getCountryDiffs","keyCode","mouseMove","_get","records","restUrl","countryData","centroids","JSON","parse","stringify","geojson","global_summary_all","assign","geometry","coordinates","visibleCountries","isCountryVisible","fitBounds","padding","bottom","right","easing","num","_version","params","jsonp","promise","err","_statuses","_presences","global_summary_data","west","south","east","north","setStatusPresence","queryLayers","queryRenderedFeatures","removeDuplicateFeatures","arraysAreTheSame","clearPopups","arr","uniqueValues","uniqueFeatures","arr1","arr2","join","closePAPopuplist","timer","clearTimeout","closePAPopup","showPAPopuplist","deselectFeatures","highlightFeature","clientX","clientY","ms","setTimeout","_rule","increaseOpacity","targetLayer","increaseBy","getPaintProperty","newValue","rgba","getNewOpacity","alpha","setPaintProperty","layerid","_show","_showChanges","pop","getVisibleCountries","mapReady","showPAPopupFromList","Boolean","location","hostname","match","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.6af0fb1d.chunk.js","sourcesContent":["module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAIAAAC0Ujn1AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAGYSURBVEhLtZXbSwJREIf7uyuIIKOLYGVaYYVUGpKZlpfNNUWKerG8380on3oXn5tY2MuvneNZK/ielplv58wM58xNJuN/QlZ9lOtlnj/goxiROpjvr8Ua86Hy8V2/NvwkVi7qECPAXu1Xut5UW9MB7kQTgjls1BvxBuiA9atm9HGYq44gEUA1HR9EAryp1uplnc6hVmx+Y1FTLZAsT6j4alYRFvViuAoJjvBlOmaboT4pDCDUKcuRmm4jDPVS5FclaygvRtMNNa0wxM3AWXGgCw31+f3sM9Q5VHu60DJG2iQIdYp5khY1EXt6oz09uO1CjiSem5auQrUGXUaQI8lumq9aJ5B1XLgrarm8WLUvY389CYg8DM0GVr2ndCBTDO0uGFh1MO+g3e5EYytpDFDjD9QL4QrkarDqfUVqjOZtA1g11QKWnwi8BKvOlkcgAjzXIi/BqgMq2+vtZEstT3m9CGcN2Yw306V3iORg1a5oDbzcJnDIquk5hoCpsOqdVDtU/H7STgt9v2J59CRh1RpwLThiinp2JuMvYYqH3JKnxccAAAAASUVORK5CYII=\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAIAAAC0Ujn1AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAHtSURBVEhLrZbbTsJAEIb3WUVFTTSeL1Q8IipRRBH1UhONp5gYjYd747sYFUEo0M6ExKmbbJYf2qKSfBdl8s9HM7vdVtXrNWZy3Xqt5nQXUVcFqHYFZf9wHx9odoYnJ2g7411fUT5H6Q1aXLAzndOkpvmE+/IMcKyH9nbtWIc03/XdLXg1tJnmiXHayVJizs6H06QWuDcGXhseH3Uf7mVu/uhWlr2DfR4apLWU+/QIHqFF3dcLukgom/EOD8AjoNrgHR+BApDV9mMXZ4LdaPi7WpA10Bf6b4BANaVWjSISWSFoF4LV+Rz0B8FTk9Cr+ddANL9WCzwQB0tbaH0NGjWh6pFhsAA8NuofDAHPUag61gMuQLwSk0fG7jKEqb3Lc3DZ8I83hDC1QLkdMBpkd0IYiFAL8rCBVCPTkF0EYZtotRxDILWh3SzkDdFqgeP9YDTQ0iKEDR2p5SCl9DpINTyfgLChIzWlkmA0cH8fhA3KccpQaoWnp8CoCdrRGlUsl6DUirxKQKrx9vOQtFEfpQKUWpGXutHJkuoDgDJbEAPUa+G9Wq1AFZD9J+OWFfPv9PTEryRX7EBb1JdTKVciZkKrSX3B8bgpRqJczy2UilBti3wpeLc3UAxBNRqNt88PqHYFX/35VXSq0Vvwd9Scb8O5hv9FicQtAAAAAElFTkSuQmCC\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAIAAAC0Ujn1AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAK6SURBVEhL7ZRrTxNBFIb5lwZvoSYa741ctNhEi0AlgoLxFmLCpYVKKWkhKqAhXj4YQ4L6N6C7M7Pb3W3pDXyXSYbp7HShiR9tnmxm55zz7JnTzXaVy+4/xLaZ4L8ahKkfr0SVnY7QqD//XnmQufwwc2XrTz6+eGl6c1Rkd4RGDQo/Z+MLEah9+0JkOHtDhIBcA+SQQMlpGchguoerwUS+X+ldqQximgaH37aocf9sNTae7/u0k+MP6J05I0fbIaRhak5s/gLsYCR0LECRcnjoWC2ywYftDFej8cm1wenNZDBH0ckgimS9GowuR4UdxNMRbVoQIdQPZH5rknuFOpa6GEwLInKAXj29kVzfzsrqgblzYGjpmpzPS5K56OuPQ+mvz5VQixpwdfb7W6gVO+fVegLv6MDs2WTuNq53586L0MZOVlbp1fgr7qd7tOoQkq0fCVUNhH0w1YE98e7qeKFf9oSpwYv3CW5XREE2f+UUj0YNhHpqLc6HroiCoGvZ4LilE9Sgb6Y73P509R6uqS9TssFgpl4NZPtY7o52LPir32wMjyzfzHx7Kdcymzlem4EAeeKFH6mxlV5t4/AqhRhFkZoHBwdt1UC2g4mCf3CFR0vXlSqDkVqteiq1bOdjFfTPdislR6NwDg8PS57TJeplRKrY4WosRpZvca/yFvvJjl2kBP1Wa1X0flo1s0iRGJRRbD7J98lfKw4rWcRijUaj2Wxi1v7LJ4oVRA3WlkV3zWKlur9LDZMRz3NEFODWZBSvBPptNBsUfRyVt1UDXokFsymxLUwQHWGIe8Qk/gP8aMm1cVvZryCKOewRA2PhhSerAfpCPbz1eh0KXFnJ3qMmwEzrDX/Tq3hYu9KBjtU4tWVTZjEMFE2Z1CQWxUkxuF1ieJUy6t2yh/PW6jWs+Q9DwCMtx8a+kPqU3b9RPGEKBRiHyAAAAABJRU5ErkJggg==\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAIAAAC0Ujn1AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAJwSURBVEhL7dXdT1JhHMDx/souumhrrVXrIi7assA8KJYrqGbCZqWkbUrkECokeXMCExDGi/F+DonHlpQk7wc4V/30Yec8PLzpZuvG7XvBnnN+nz2HnQcucVztH3VBE50DXa9XfCmHPWJYD62sBXQ/fu+i9TPQtXplL8/8Kf3CF9P70SDtmv4yipqzPSuU8ujSELpQPEiyYU983eRbnLcpYTKeCwKHl9qPOKMmV8ysNsuXXZpKtYRmB9EHBRYsSNiU1qEy+hYIGpVkQ7FcoFguCONDdm0OLMFGLEHdVtLavd/u8NlBNDF2mvDx/0ETM6cMFzrpWqVpt/HPVTw1xkyN0O9eZCJOYnhwuCbSjW87vEzKSx9CDCURoueUxHy/ttMbuTwtgG26kYghNDcm0T69AuE6o1EQSs/m7cdvaqVa7KD5R6OIrslGwH2lvExTd3E9Y9URUHfvnS+BZvOMSDf9XuSiTE+uAe2fuI3TzOQ9AupuaVMNdPZnQqRbb9/gtFdxC2jL4+sdNCVJZ4ccmY+e10Cn2LBI8yolToOCvhP91NXw+B2BzsQ9hEW06tUCvfN9G6M1Mzhdlt33KG6C7py8IbhQOuMjLCJ72AB0iHaLdNNmxWkUJ30gfD6m5RIC6pnWofQlHSLNlY4EpV8twwpMJvciH9yzjqjRHbP4084ws5VgQzgNBTObGN1n42JyiqtX4bbdgww8svAbi1p2qXEagVCbhlqfjKSImhjnDtv/LEelQzhyG9HPX4N6o3dB755dPHmXcVFIpKFGluZnpkVUTjUta/gNPYPjVz95JqIOWqxchBFy8Yz1oc+jC7ojrvYXDJkYZx8ZReYAAAAASUVORK5CYII=\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAIAAAC0Ujn1AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAARDSURBVEhLnZbZTxtHHMf5Q/rYfydSH6rmqarUh15JK6GoUdWoIU2J0pT0gEAKdbyAXeMjQGywHV8Y8BF84JP4WoMPHGzHF77WkD6Qfp2hm/WwpG2kj1ae38x8dnaO33io1+vyPM36Z2135evjqUKURDiuw9f+XwbUqULEElyc0H+34pUL428HrV50S6TWsY2oHkUMudFqCRu8gU63SUVeq+H1JNcwZKirh0VE6s3GqObLzlGr2+PanTe9o9I4oCKgr+Z6/QmFWuWYhncrYUOxy7XTxeTl3y/U33nX4lRE9jzleoH0AfVmNZ4P7mR8ILEfKpYzfBXP0LNKNprxbbOOZCE8qb8ONbqhAkM2+ZTwTsgujSu+kpp/RJUpoGELUevmHDM/jCogNd3+XvV5yqYRSglDuRJr8CutwaXw7pNJw3Wl4z6inW77oF4gnZ0xiy20jDWYMd2S28eZha9JXP147JFD8sjN6H0KFHvdttALhnLltMz+64jyE41rBhONHYJorVk/qOVmF66atxbi+TDmCiT3w5bAQ7XlN3NAE8l4SJAA9dF+TugFQ8VqHl96WfIeniCa8bY6La7HNbrVVZc0mt0WKs6jrw4FaXX1sBRIO0Aw7V71KZ7Xn1UatZOTk71yMpLxYwEoiyjs+hLrWqXVVLnZbh4dH73kuPR+dCcboBTnsusLRkztzqFQRatrzcbLYhEfGMn8p6n49s+P7REtfqx65TtZv1A1oD5sN1/89QLetG0xlgsKFaKw25bRBx/9tHTFk7DJ1se1W3O1Zpm30aMGJ6US7JRFlHg+oJZ/MzPz2ZRxRGbu7wIcH94joq4no68mpL+9QrtuINRRsJENu+TarOQSox3BHi/XXp9YEXUw7YVatTwq1d/8YuaCxHI7uOuijDxoicMS8+hxMv5lGTscjnhNs3IHfRjl1SvMRXwmMjhyACUF7Mp8Xz1o4KHVSB14krxTqGRancaSW8oYbw1L3vck1ga8xv75PiqJ5DzCmVGfSQVY9IN0CBZkEiLFiWcDtmOrpVerUI2FiMw1QM5CUj0tch14U7rZxP7pdoxmPPaI7ml2+6CS5bucRVy9Ftbyv4/NJqjZbSvxpl5lq/Xo6n3jTcZ6N5YL8C0pRNQGn2LKcEPtnNZ5ZXga/Kr+qJNbRM3GXORNeGLDFZ6LXAIEETVmA1sCCZZcZki2p+P9B9alhxdoN6apvkLEJ6RUy2ucf9xQfQo1Yxuj1MDpVN+79yFj/ZlcfoDEeQMQV1caRdxVuFYeWO54U3beyOOOWyZWruk8sr1iHMcdewZBSiKuxrmyh3WKjclYTjz/GfwKMl3DzAdo6Y6Zm+06JRFXAwwkkQ9RRiGBtFPrmce9urA5hWvv7HqeqwaUiwLbHMa5tV/I8FuDCQS8pXpzxzj9+AcixaifxK1UX0Cr8YeEP4eUjscaWiZSo1+JeeP7DtDr/g1Mwv7rGr/d4gAAAABJRU5ErkJggg==\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAIAAAC0Ujn1AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAOUSURBVEhLrZXrUxJhFIf5m5umZmrKyS5ayngLDbISSxQVhcVFSUGUO2LLgl1mcpquisptuewuC870215921YCh5p5PhwOnIezZ9+LQaiWhYogilVCIp35Xxiap81Kraraq+WWdgs76o2t65KXwZArFZrNRi2bFXhO+vpZzJ/AHk/x5GsmxAwv9ZqYR7Tg8hhqYiVfKij5nGJ6LCRiinFQ2k3Cnszs4esQtzPouHVv7opja0FbdhkMZAi5Ur7hdNady0XujTI4IHtY1b6n/mJm4wXso84HnsiqtrIjZ2qQPzlGy8r+x/zRoez3SZ/2kYyl+DCXHHHeR+NWrxl2ENgJB5Ihnegiv9Wg9G5P4nYbioKHEM+XDX7EBN1o/IH92qxv2h1yP1+bMDEDS1sOregif6hBMZ+ribVGs3FSLFRrZfWtHh/hd1Ney6+hX4V9+vUkHgIf5/yvtC4dejUQKqWyUDqt4QUUpMMf9acW6cO7OJ+e35yd9Dy2rU+xEc/L18+IHUmdkdJCDSqHB9WX04XUG8Ty7o7S3ycdfEccSIajKY5M3OabJnYm6NJJCa3VQEpxys0b0vu3iGXfRn3yKcmTMmK3ei3EvpWMUCPlr2qg9jsyLJ4cqXE8iqGTPKkk9gm30bjUsxCYo0ZKOzWQ3mYwaDU+PwYIpBjqxcA87FDH+bMNTOmg1hkpCT6NYtL48vbS9m40nlYzWjqptWQP6WIHm8nIYsCOZQ67Tkq4hFookt7rjgWxkKN517Zr3D2Apd29Wg74yZtU7vaSc5FgXTNjebxaf9G9GgeLOgoEPbfVJzjPP/OYoMbq/gc1abZcUnrviLUKzVvYEajt/pku1VL2QHnYr8ZHWTka1n41tNwLtSvo7Fb97YscDqox+tUsD2/Eh01odNx2hZy2DetmqzO200CgKxX0SbHq2JqH+snK0JTXbHT0tDxGOs/6jGKexlEuNbMx1We/hgtojOnHf6xEWJ0XdFKT3YhB+300iTI2zOKAxT7sm7/ezfGEDSInYgjUk49xkiSuNJTFeJ4JMjafFW/yCTukNVLaqaU0X7fPIqiPm6S9DAJcCLQSC2PcPYiWcULRpJZ2apldkddWcdEoA4/wUesFUGPcUON+0OYp7dTq1ZVJ42qXk4mLXnIPmFeGtXktbdWzNnXlVctxLqUrYyPs5OqYxTPqibbeL+Dv6oqAUUQ5TtcvAV1jH/oS27r8b9KZn+Yu6vvmigW4AAAAAElFTkSuQmCC\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAIAAAC0Ujn1AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAHtSURBVEhLtdXdS8JQGAbwZRZpTTGbn1gL8QMqIiiIgi7qouv+16CrQLqKKKLAYaa10lUuNzVrWeZstNfY5nY8Q/xdzPeZ8HA4x80xSXonRsMBnyMwoLokFJVr4YXJMIdM+UK9iQm1IdnSucft4xtPAW9EvcOJD5uJXXUeyLz69jnbbImUBxq13qTaUmwdApJJtbpYCGZYPt+RO5QnNO5wTk+RMX8cvtAzVpeEO4LoQsBTbVbW6C0IGsZjbEgCTNjmyOBp/hiChrH6q92CyY6on1a2EUKPrjqTPfz/MdglfRvPTFcd9i3AZN+EcxKmHl11KrIiNnkINvlngpx4D+GPca9rHwInshBsaunPyfyRYV/zj9XbxUAaMp6P1ns6ugqhf9UqmkqGvPMQ8CjvA22vwrxaMTXpggkP6TI+wJbV7U4bJgylajEZXobQY1n9g11dqXNe9ywEDctquSvDhMQJ7Hp8x/RdaFmNo9Io+8kghD6ov4KzQibsi0EwI8vyApWA0Ae16jkyBJPeS52753PNzzqiV4Fa9UnuaJFKQuhpSOJybAMCkmU1V2NluQPhz+NrgQ6korM05EFwjzH/dL2d3sfvVVhWR300U75UZ5a/2Vs5UGd8qL1W5Lgr0uW1tdh/A6qHMdQjgzayaoL4BQz1uJ4NmBXJAAAAAElFTkSuQmCC\"","import React from 'react';\n\nclass Status extends React.Component {\n\trender() {\n\t    let classname = \"stat \" + this.props.status;\n\t    let text=\"\", title=\"\";\n\t    let amount = this.props.amount && this.props.amount.toLocaleString();\n\t    switch (this.props.status) {\n\t        case 'added':\n\t            text = \"+\";\n\t            title = amount + \" protected areas added\";\n\t            break;\n\t        case 'removed':\n\t            text = \"-\";\n\t            title = amount + \" protected areas removed\";\n\t            break;\n\t        case 'changed':\n\t            text = \"Δ\"; //≠Δ\n\t            title = amount + \" protected areas changed\";\n\t            break;\n\t        case 'no_change':\n\t            text = \"=\"; //≠Δ\n\t            title = amount + \" protected areas unchanged\";\n\t            break;\n\t        case 'total':\n\t            text = \"Σ\"; //\n\t            title = amount + \" protected areas in total\";\n\t            break;\n\t        default:\n\t            // code\n\t    }\n\t    let amountSpan = (this.props.iconOnly) ? null : <span style={{fontSize: (this.props.status === 'total') ? '14px' : '10px', paddingLeft: (this.props.status === 'total') ? '2px' : '0px'}}>{amount}</span>;\n\t\treturn (\n\t\t    <div className={'statusDiv'} title={(this.props.amount === undefined) ? this.props.status : title} style={{display:((this.props.amount>0)||(this.props.amount === undefined && this.props.iconOnly)) ? \"inline\" : \"none\"}}>\n\t\t    <span className={classname} style={{display: (this.props.hide) ? \"none\" : \"inline\", paddingRight: (this.props.rightPadding) ? this.props.rightPadding + 'px' : '0px'}}>{text}</span>{amountSpan}</div>\n\t\t);\n\t}\n}\n\nexport default Status;","import React from 'react';\nimport Status from './Status.js';\nclass StatsBar extends React.Component {\n\trender() {\n\t    let spacer = <span style={{paddingLeft: (this.props.spacing) ? this.props.spacing + 'px' : '6px'}}/>;\n\t\treturn (\n\t\t    <div className={'statsBar'}>\n                <div style={{display:'inline',paddingRight:'6px'}}><Status status={'total'} amount={this.props.values.total}/>{spacer}</div>\n                <div style={{display: ((this.props.showStatuses.indexOf('added') !==-1)&&this.props.values.added) ? 'inline' : 'none'}}><Status status={'added'} amount={this.props.values.added}/>{spacer}</div>\n                <div style={{display: ((this.props.showStatuses.indexOf('removed') !==-1)&&this.props.values.removed) ? 'inline' : 'none'}}><Status status={'removed'} amount={this.props.values.removed}/>{spacer}</div>\n                <div style={{display: ((this.props.showStatuses.indexOf('changed') !==-1)&&this.props.values.changed) ? 'inline' : 'none'}}><Status status={'changed'} amount={this.props.values.changed} rightPadding={1}/>{spacer}</div>\n                {/*<div style={{display: ((this.props.showStatuses.indexOf('no_change') !==-1)&&this.props.values.no_change) ? 'inline' : 'none'}}><Status status={'no_change'} amount={this.props.values.no_change}/></div>*/}\n            </div>\n\t\t);\n\t}\n}\n\nexport default StatsBar;","import React from 'react';\nimport StatsBar from './StatsBar.js';\n\nclass CountryPopup extends React.Component {\n    clickCountryPopup(){\n      this.props.clickCountryPopup(this.props.country);\n    }\n    render() {\n        return (\n            <div  className={'countryPopup'}>\n              <div title={\"View details for \" + this.props.country.name} onClick={this.clickCountryPopup.bind(this)}>\n                <div className={'name'}>{(this.props.country.name.length > 40) ? (this.props.country.name.substr(0,30) + '...') : this.props.country.name}</div>\n                <div className={'stats'}>\n                  <StatsBar values={this.props.country} showStatuses={this.props.showStatuses}/>\n                </div>\n              </div>\n            </div>\n        );\n    }\n}\n\nexport default CountryPopup;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport CountryPopup from './CountryPopup.js';\nimport mapboxgl from 'mapbox-gl';\n\n// const INITIAL_CENTER = [-175.15, -21.15]; \nconst INITIAL_CENTER = [0, 0];\nconst INITIAL_ZOOM = 2;\nconst INITIAL_FILTER = ['==', 'wdpa_pid','-1'];\n//paint properties\nconst CIRCLE_RADIUS_STOPS = {\"stops\": [[5, 1],[10, 4], [15, 7]]};\nconst P_TO_CHANGED_GEOMETRY = { \"fill-color\": \"rgba(99,148,69,0.2)\", \"fill-outline-color\": \"rgba(0,0,0,0)\"};\nconst P_TO_CHANGED_GEOMETRY_LINE = { \"line-color\": \"rgb(99,148,69)\", \"line-width\": 2, \"line-opacity\": 0.6, \"line-dasharray\": [3,3]};\nconst P_SELECTED_POINT = {\"circle-radius\": CIRCLE_RADIUS_STOPS, \"circle-color\": \"rgb(0,0,0)\", \"circle-opacity\": 0};\nconst P_SELECTED_LINE = { \"line-color\": \"rgb(0,0,0)\", \"line-width\": 2, \"line-opacity\": 0};\nconst P_SELECTED_POLYGON = { \"fill-color\": \"rgba(0,0,0,0)\", \"fill-outline-color\": \"rgba(255,0,0,0)\"};\n\nclass MyMap extends React.Component {\n  constructor(props){\n    super(props);\n    this.state = {\n    };\n    this.popups = [];\n  }\n  componentDidMount(){\n    //instantiate the map\n    mapboxgl.accessToken = 'pk.eyJ1IjoiYmxpc2h0ZW4iLCJhIjoiMEZrNzFqRSJ9.0QBRA2HxTb8YHErUFRMPZg';\n    this.map = new mapboxgl.Map({\n      container: 'map',\n      style: window.MAP_STYLE_DEFAULT,\n      center: INITIAL_CENTER,\n      zoom: INITIAL_ZOOM,\n    });\n    //set a property in the App class\n    this.props.setMap(this.map);\n    //get a reference to the map loaded event\n    this.mapLoadedEvent = this.mapLoaded.bind(this);\n    this.map.on(\"load\", this.mapLoadedEvent);\n  }\n  //called when the maps style has loaded\n  mapLoaded(map){\n    //remove the event handler using the actual event reference\n    this.map.off(\"load\", this.mapLoadedEvent); \n    this.mapLoadedEvent = undefined;\n    //add the to sources and layers\n    this.addToLayers();\n    //call the event in the app component\n    this.props.mapStyleLoaded();\n  }\n  componentDidUpdate(prevProps, prevState){\n    if (this.mapLoadedEvent) return; //the maps style has not laded\n    //see if the to version has changed\n    if (this.props.toVersion && (this.props.toVersion.id !== prevProps.toVersion.id)) this.addToLayers();\n    //are the from and to versions different\n    if (this.props.fromVersion.id !== this.props.toVersion.id){\n      //if the from doesn't exist or it does but for a different version, then add it\n      if ((this.map.getSource(window.SRC_FROM_POLYGONS) === undefined) || ((this.map.getSource(window.SRC_FROM_POLYGONS) !== undefined) && (this.props.fromVersion.id !== prevProps.fromVersion.id))){\n        //add the to change layers - these need to be added first as the from layers go before them\n        this.addToChangeLayers();\n        //add the from layers\n        this.addFromLayers();\n      }\n    }else{ //from and to are the same\n      //remove the to change layers\n      this.removeToChangeLayers();\n      //remove the from layers\n      this.removeFromLayers();\n      //unfilter the no_change layers\n      this.unfilterNoChangeLayers();\n      //remove the popups\n      this.removePopups();\n    }\n    if (this.props.view === 'global'){\n      //render the country popups\n      if (this.props.global_summary !== prevProps.global_summary) {\n        //clear the existing popups\n        this.removePopups();\n        let iso3s = [];\n        //create and add the popups\n        this.props.global_summary.forEach(country => {\n          iso3s.push(country.iso3);\n          this.addCountryPopup(country);\n        });\n        this.filterToVersionByCountries(iso3s);\n      }      \n    }else{\n      //see if anything has changed\n      if (this.props.country_summary !== prevProps.country_summary){\n        //render the country change maps\n        this.filterCountryLayers();\n        //remove the popups\n        this.removePopups();\n      }\n    }\n  }\n  //adds the sources and layers for the from version\n  addFromLayers(){\n    let _from = this.props.fromVersion.key;\n    //add the sources\n    this.addSource({id: window.SRC_FROM_POLYGONS, source: {type: \"vector\", tiles: [ window.TILES_PREFIX + \"wdpa_\" + _from + \"_polygons\" + window.TILES_SUFFIX]}});\n    this.addSource({id: window.SRC_FROM_POINTS, source: {type: \"vector\", tiles: [ window.TILES_PREFIX + \"wdpa_\" + _from + \"_points\" + window.TILES_SUFFIX]}});\n    //add the layers\n    this.addLayer({id: window.LYR_FROM_DELETED_POLYGON, sourceId: window.SRC_FROM_POLYGONS, type: \"fill\", sourceLayer: \"wdpa_\" + _from + \"_polygons\", layout: {visibility: \"visible\"}, paint: { \"fill-color\": \"rgba(255,0,0, 0.2)\", \"fill-outline-color\": \"rgba(255,0,0,0.5)\"}, filter:INITIAL_FILTER, beforeID: window.LYR_TO_POLYGON});\n    this.addLayer({id: window.LYR_FROM_DELETED_POINT, sourceId: window.SRC_FROM_POINTS, type: \"circle\", sourceLayer: \"wdpa_\" + _from + \"_points\", layout: {visibility: \"visible\"}, paint: {\"circle-radius\": CIRCLE_RADIUS_STOPS, \"circle-color\": \"rgb(255,0,0)\", \"circle-opacity\": 0.6}, filter:INITIAL_FILTER, beforeID: window.LYR_TO_POLYGON});\n    //geometry change in protected areas layers - from\n    this.addLayer({id: window.LYR_FROM_GEOMETRY_POINT_TO_POLYGON, sourceId: window.SRC_FROM_POINTS, type: \"circle\", sourceLayer: \"wdpa_\" + _from + \"_points\", layout: {visibility: \"visible\"}, paint: {\"circle-radius\": CIRCLE_RADIUS_STOPS, \"circle-color\": \"rgb(255,0,0)\", \"circle-opacity\": 0.5}, filter:INITIAL_FILTER, beforeId: window.LYR_TO_GEOMETRY_POINT_TO_POLYGON});\n    this.addLayer({id: window.LYR_FROM_GEOMETRY_POINT_COUNT_CHANGED_LINE, sourceId: window.SRC_FROM_POLYGONS, type: \"line\", sourceLayer: \"wdpa_\" + _from + \"_polygons\", layout: {visibility: \"visible\"}, paint: { \"line-color\": \"rgb(255,0,0)\", \"line-width\": 1, \"line-opacity\": 0.5, \"line-dasharray\": [3,3]}, filter:INITIAL_FILTER, beforeId: window.LYR_TO_GEOMETRY_POINT_TO_POLYGON});\n    this.addLayer({id: window.LYR_FROM_GEOMETRY_SHIFTED_LINE, sourceId: window.SRC_FROM_POLYGONS, type: \"line\", sourceLayer: \"wdpa_\" + _from + \"_polygons\", layout: {visibility: \"visible\"}, paint: { \"line-color\": \"rgb(255,0,0)\", \"line-width\": 1, \"line-opacity\": 0.5, \"line-dasharray\": [3,3]}, filter:INITIAL_FILTER, beforeId: window.LYR_TO_GEOMETRY_POINT_TO_POLYGON});\n    //selection layers\n    this.addLayer({id: window.LYR_FROM_SELECTED_POLYGON, sourceId: window.SRC_FROM_POLYGONS, type: \"fill\", sourceLayer: \"wdpa_\" + _from + \"_polygons\", layout: {visibility: \"visible\"}, paint: P_SELECTED_POLYGON, filter:INITIAL_FILTER, beforeId: window.LYR_TO_SELECTED_POLYGON});\n    this.addLayer({id: window.LYR_FROM_SELECTED_LINE, sourceId: window.SRC_FROM_POLYGONS, type: \"line\", sourceLayer: \"wdpa_\" + _from + \"_polygons\", layout: {visibility: \"visible\"}, paint: P_SELECTED_LINE, filter:INITIAL_FILTER, beforeId: window.LYR_TO_SELECTED_POLYGON});\n    this.addLayer({id: window.LYR_FROM_SELECTED_POINT, sourceId: window.SRC_FROM_POINTS, type: \"circle\", sourceLayer: \"wdpa_\" + _from + \"_points\", layout: {visibility: \"visible\"}, paint: P_SELECTED_POINT, filter:INITIAL_FILTER, beforeId: window.LYR_TO_SELECTED_POLYGON});\n  }\n  //removes the sources and layers for the from version\n  removeFromLayers(){\n    if (this.map.getSource(window.SRC_FROM_POLYGONS)) this.removeSource(window.SRC_FROM_POLYGONS);\n    if (this.map.getSource(window.SRC_FROM_POINTS)) this.removeSource(window.SRC_FROM_POINTS);\n  }\n  //adds the sources and layers for the to version\n  addToLayers(){\n    try {\n      let _to = this.props.toVersion.key;\n      //add the sources\n      let attribution = \"IUCN and UNEP-WCMC (\" + this.props.toVersion.year + \"), The World Database on Protected Areas (\" + this.props.toVersion.year + \") \" + this.props.toVersion.title + \", Cambridge, UK: UNEP-WCMC. Available at: <a href='http://www.protectedplanet.net'>www.protectedplanet.net</a>\";\n      this.addSource({id: window.SRC_TO_POLYGONS, source: {type: \"vector\", attribution: attribution, tiles: [ window.TILES_PREFIX + \"wdpa_\" + _to + \"_polygons\" + window.TILES_SUFFIX]}});\n      this.addSource({id: window.SRC_TO_POINTS, source: {type: \"vector\", tiles: [ window.TILES_PREFIX + \"wdpa_\" + _to + \"_points\" + window.TILES_SUFFIX]}});\n      //no change protected areas layers\n      this.addLayer({id: window.LYR_TO_POLYGON, sourceId: window.SRC_TO_POLYGONS, type: \"fill\", sourceLayer: \"wdpa_\" + _to + \"_polygons\", layout: {visibility: \"visible\"}, paint: { \"fill-color\": \"rgba(99,148,69,0.2)\", \"fill-outline-color\": \"rgba(99,148,69,0.3)\"}, beforeID: window.LYR_TO_SELECTED_POLYGON});\n      this.addLayer({id: window.LYR_TO_POINT, sourceId: window.SRC_TO_POINTS, type: \"circle\", sourceLayer: \"wdpa_\" + _to + \"_points\", layout: {visibility: \"visible\"}, paint: {\"circle-radius\": CIRCLE_RADIUS_STOPS, \"circle-color\": \"rgb(99,148,69)\", \"circle-opacity\": 0.6}, beforeID: window.LYR_TO_SELECTED_POLYGON});\n      //selection layers\n      this.addLayer({id: window.LYR_TO_SELECTED_POLYGON, sourceId: window.SRC_TO_POLYGONS, type: \"fill\", sourceLayer: \"wdpa_\" + _to + \"_polygons\", layout: {visibility: \"visible\"}, paint: P_SELECTED_POLYGON, filter:INITIAL_FILTER});\n      this.addLayer({id: window.LYR_TO_SELECTED_LINE, sourceId: window.SRC_TO_POLYGONS, type: \"line\", sourceLayer: \"wdpa_\" + _to + \"_polygons\", layout: {visibility: \"visible\"}, paint: P_SELECTED_LINE, filter:INITIAL_FILTER});\n      this.addLayer({id: window.LYR_TO_SELECTED_POINT, sourceId: window.SRC_TO_POINTS, type: \"circle\", sourceLayer: \"wdpa_\" + _to + \"_points\", layout: {visibility: \"visible\"}, paint: P_SELECTED_POINT, filter:INITIAL_FILTER});\n      //add the change layers if needed\n      if (this.props.fromVersion.id !== this.props.toVersion.id) this.addToChangeLayers();\n    } catch (e) {\n      console.log(e);\n    }\n  }\n  //adds the change layers in the to version\n  addToChangeLayers(){\n    let _to = this.props.toVersion.key;\n    //attribute change in protected areas layers\n    this.addLayer({id: window.LYR_TO_CHANGED_ATTRIBUTE, sourceId: window.SRC_TO_POLYGONS, type: \"fill\", sourceLayer: \"wdpa_\" + _to + \"_polygons\", layout: {visibility: \"visible\"}, paint: { \"fill-color\": \"rgba(99,148,69,0.4)\", \"fill-outline-color\": \"rgba(99,148,69,0.8)\"}, filter:INITIAL_FILTER, beforeID: window.LYR_TO_SELECTED_POLYGON});\n    //geometry change in protected areas layers - to\n    this.addLayer({id: window.LYR_TO_GEOMETRY_POINT_TO_POLYGON, sourceId: window.SRC_TO_POLYGONS, type: \"fill\", sourceLayer: \"wdpa_\" + _to + \"_polygons\", layout: {visibility: \"visible\"}, paint: P_TO_CHANGED_GEOMETRY, filter:INITIAL_FILTER, beforeID: window.LYR_TO_SELECTED_POLYGON});\n    this.addLayer({id: window.LYR_TO_GEOMETRY_POINT_TO_POLYGON_LINE, sourceId: window.SRC_TO_POLYGONS, type: \"line\", sourceLayer: \"wdpa_\" + _to + \"_polygons\", layout: {visibility: \"visible\"}, paint: P_TO_CHANGED_GEOMETRY_LINE, filter:INITIAL_FILTER, beforeID: window.LYR_TO_SELECTED_POLYGON});\n    this.addLayer({id: window.LYR_TO_GEOMETRY_POINT_COUNT_CHANGED_POLYGON, sourceId: window.SRC_TO_POLYGONS, type: \"fill\", sourceLayer: \"wdpa_\" + _to + \"_polygons\", layout: {visibility: \"visible\"}, paint: P_TO_CHANGED_GEOMETRY, filter:INITIAL_FILTER, beforeID: window.LYR_TO_SELECTED_POLYGON});\n    this.addLayer({id: window.LYR_TO_GEOMETRY_POINT_COUNT_CHANGED_POLYGON_LINE, sourceId: window.SRC_TO_POLYGONS, type: \"line\", sourceLayer: \"wdpa_\" + _to + \"_polygons\", layout: {visibility: \"visible\"}, paint: P_TO_CHANGED_GEOMETRY_LINE, filter:INITIAL_FILTER, beforeID: window.LYR_TO_SELECTED_POLYGON});\n    this.addLayer({id: window.LYR_TO_GEOMETRY_SHIFTED_POLYGON, sourceId: window.SRC_TO_POLYGONS, type: \"fill\", sourceLayer: \"wdpa_\" + _to + \"_polygons\", layout: {visibility: \"visible\"}, paint: P_TO_CHANGED_GEOMETRY, filter:INITIAL_FILTER, beforeID: window.LYR_TO_SELECTED_POLYGON});\n    this.addLayer({id: window.LYR_TO_GEOMETRY_SHIFTED_POLYGON_LINE, sourceId: window.SRC_TO_POLYGONS, type: \"line\", sourceLayer: \"wdpa_\" + _to + \"_polygons\", layout: {visibility: \"visible\"}, paint: P_TO_CHANGED_GEOMETRY_LINE, filter:INITIAL_FILTER, beforeID: window.LYR_TO_SELECTED_POLYGON});\n    //added protected areas layers\n    this.addLayer({id: window.LYR_TO_NEW_POLYGON, sourceId: window.SRC_TO_POLYGONS, type: \"fill\", sourceLayer: \"wdpa_\" + _to + \"_polygons\", layout: {visibility: \"visible\"}, paint: { \"fill-color\": \"rgba(63,127,191,0.2)\", \"fill-outline-color\": \"rgba(63,127,191,0.6)\"}, filter:INITIAL_FILTER, beforeID: window.LYR_TO_SELECTED_POLYGON});\n    this.addLayer({id: window.LYR_TO_NEW_POINT, sourceId: window.SRC_TO_POINTS, type: \"circle\", sourceLayer: \"wdpa_\" + _to + \"_points\", layout: {visibility: \"visible\"}, paint: {\"circle-radius\": CIRCLE_RADIUS_STOPS, \"circle-color\": \"rgb(63,127,191)\", \"circle-opacity\": 0.6}, filter:INITIAL_FILTER, beforeID: window.LYR_TO_SELECTED_POLYGON});\n    \n  }\n  //removes the change layers in the to version\n  removeToChangeLayers(){\n    if (this.map && !this.map.isStyleLoaded()) return;\n    this.props.statuses.forEach(status => {\n      if (status.key !== 'no_change'){\n        status.layers.forEach(layer => {\n          if (this.map.getLayer(layer)) {\n            this.map.removeLayer(layer);\n          }\n        });\n      }\n    });\n  }\n  //removes any filter from the to points and to polygons layers\n  unfilterNoChangeLayers(){\n    //get the no change status object\n    let no_change_status = this.props.statuses.filter(status => status.key === 'no_change');\n    //clear the filter depending on whether it is a global or country view\n    let filter = (this.props.view === 'global') ? null : ['in', 'iso3', this.props.country.iso3];\n    //iterate through the layers and set the filter\n    no_change_status[0].layers.forEach(layer => this.map.setFilter(layer, filter));\n    //\n  }\n  //adds a source to the map\n  addSource(details){\n    //if the source already exists then delete it\n    if (this.map.getSource(details.id)) this.removeSource(details.id);\n    this.map.addSource(details.id, details.source);\n  }\n  //removes a source and all its dependent layers\n  removeSource(id){\n    this.map.getStyle().layers.forEach((layer)=>{\n      if (layer.source === id) {\n        this.map.removeLayer(layer.id);\n      }\n    });\n    this.map.removeSource(id);\n  }\n  //adds an individual layer to the map\n  addLayer(details){\n    //if the layer already exists then delete it\n    if (this.map.getLayer(details.id)){\n      this.map.removeLayer(details.id);\n    } \n    this.map.addLayer({\n      'id': details.id,\n      'type': details.type,\n      'source': details.sourceId,\n      'source-layer': details.sourceLayer,\n      'paint': details.paint\n    }, (details.beforeId) ? details.beforeId : undefined);\n    //set a filter if one is passed\n    if (details.hasOwnProperty('filter')) this.map.setFilter(details.id, details.filter);\n    if (this.props.view === 'country'){\n      //set the visibility of the layer depending on the visible property of the status \n      let status = this.props.statuses.filter(status => {\n        return (status.layers.indexOf(details.id) !== -1);\n      })[0];\n      if (status) this.map.setLayoutProperty(details.id, \"visibility\", (status.visible) ? \"visible\" : \"none\" );\n    }\n  }\n  clickCountryPopup(country){\n    //set the currently selected country\n    this.props.clickCountryPopup(country);\n  }\n  addCountryPopup(country){\n    let countryPopup = <CountryPopup country={country} key={country.iso3} showStatuses={this.props.showStatuses} clickCountryPopup={this.clickCountryPopup.bind(this)}/>;\n    const placeholder = document.createElement('div');\n    ReactDOM.render(countryPopup, placeholder);\n    this.popups.push(new mapboxgl.Popup({closeButton: false, closeOnClick: false})\n        .setLngLat(country.centroid)\n        .setDOMContent(placeholder)\n        .addTo(this.map));\n  }\n  removePopups(){\n    this.popups.forEach(popup => popup.remove());\n  }\n  filterToVersionByCountries(iso3s){\n      let filter = ['in', 'iso3'].concat(iso3s);\n      this.map.setFilter(window.LYR_TO_POLYGON, filter);\n      this.map.setFilter(window.LYR_TO_POINT, filter);\n  }\n  filterCountryLayers(){\n    let toPolygonsFilter, toPointsFilter = [], addedPAs=[], removedPAs=[], changedPAs=[], geometryShiftedPAs=[], geometryPointCountChangedPAs= [], geometryPointToPolygonPAs = [], geometryChangedPAs =[];\n    if (this.props.fromVersion){\n      //get the stats data for the country\n      this.props.country_summary.forEach(record => {\n        switch (record.status) {\n          case 'added':\n            addedPAs = record.wdpa_pids;\n            break;\n          case 'removed':\n            removedPAs = record.wdpa_pids;\n            break;\n          case 'changed':\n            changedPAs = record.wdpa_pids;\n            break;\n          case 'geometry_shifted':\n            geometryShiftedPAs = record.wdpa_pids;\n            break;\n          case 'point_count_changed':\n            geometryPointCountChangedPAs = record.wdpa_pids;\n            break;\n          case 'point_to_polygon':\n            geometryPointToPolygonPAs = record.wdpa_pids;\n            break;\n          default:\n            // code\n          }\n      });\n      //get the array of all protected areas that have changed geometries\n      geometryChangedPAs = geometryShiftedPAs.concat(geometryPointCountChangedPAs).concat(geometryPointToPolygonPAs);\n      //the toLayer should exclude all of the other protected areas that are changed, added or have their geometry shifted\n      toPolygonsFilter = ['all',['!in', 'wdpa_pid'].concat(changedPAs).concat(addedPAs).concat(geometryChangedPAs),['in', 'iso3', this.props.country.iso3]];\n      //the toPoints layer should exclude all new point PAs (which will be shown in blue)\n      toPointsFilter = ['all',['!in', 'wdpa_pid'].concat(addedPAs),['in', 'iso3', this.props.country.iso3]];        \n      //the changed layer should exclude all of the other protected areas that have had their geometry changed - these will be rendered with dashed outlines - I have changed this to show both now\n      // changedPAs = changedPAs.filter(item => !geometryChangedPAs.includes(item));\n      //set the filters on the individual layers\n      if (this.props.fromVersion) { //we are showing changes\n        this.map.setFilter(window.LYR_FROM_DELETED_POLYGON,['in', 'wdpa_pid'].concat(removedPAs));\n        this.map.setFilter(window.LYR_FROM_DELETED_POINT, ['in', 'wdpa_pid'].concat(removedPAs));\n        this.map.setFilter(window.LYR_FROM_GEOMETRY_POINT_TO_POLYGON, ['in', 'wdpa_pid'].concat(geometryPointToPolygonPAs));\n        this.map.setFilter(window.LYR_FROM_GEOMETRY_POINT_COUNT_CHANGED_LINE, ['in', 'wdpa_pid'].concat(geometryPointCountChangedPAs));\n        this.map.setFilter(window.LYR_FROM_GEOMETRY_SHIFTED_LINE, ['in', 'wdpa_pid'].concat(geometryShiftedPAs));\n      }\n      this.map.setFilter(window.LYR_TO_POLYGON, toPolygonsFilter);\n      this.map.setFilter(window.LYR_TO_POINT, toPointsFilter);\n      this.map.setFilter(window.LYR_TO_CHANGED_ATTRIBUTE, ['in', 'wdpa_pid'].concat(changedPAs));\n      this.map.setFilter(window.LYR_TO_GEOMETRY_POINT_TO_POLYGON, ['in', 'wdpa_pid'].concat(geometryPointToPolygonPAs));\n      this.map.setFilter(window.LYR_TO_GEOMETRY_POINT_TO_POLYGON_LINE, ['in', 'wdpa_pid'].concat(geometryPointToPolygonPAs));\n      this.map.setFilter(window.LYR_TO_GEOMETRY_POINT_COUNT_CHANGED_POLYGON, ['in', 'wdpa_pid'].concat(geometryPointCountChangedPAs));\n      this.map.setFilter(window.LYR_TO_GEOMETRY_POINT_COUNT_CHANGED_POLYGON_LINE, ['in', 'wdpa_pid'].concat(geometryPointCountChangedPAs));\n      this.map.setFilter(window.LYR_TO_GEOMETRY_SHIFTED_POLYGON, ['in', 'wdpa_pid'].concat(geometryShiftedPAs));\n      this.map.setFilter(window.LYR_TO_GEOMETRY_SHIFTED_POLYGON_LINE, ['in', 'wdpa_pid'].concat(geometryShiftedPAs));\n      this.map.setFilter(window.LYR_TO_NEW_POLYGON, ['in', 'wdpa_pid'].concat(addedPAs));\n      this.map.setFilter(window.LYR_TO_NEW_POINT, ['in', 'wdpa_pid'].concat(addedPAs));\n    }    \n  }\n  render() {\n    return (\n      <div id='map' className={'map'}></div>\n    );\n  }\n}\n\nexport default MyMap;","import React from 'react';\nimport ReactTable from 'react-table';\nimport 'react-table/react-table.css';\n\nclass Changed extends React.Component {\n\trenderFrom(row){\n\t\treturn <div title={row.original.previous}>{row.original.previous}</div>;        \n\t}\n\trenderTo(row){\n\t\treturn <div title={row.original.current}>{row.original.current}</div>;        \n\t}\n\trender() {\n\t\tif (this.props.changedData === {}) return;\n\t\tlet status = this.props.statuses.find(item => {return (this.props.changedData.geometryData === item.key)});\n\t\treturn (\n\t\t    (this.props.changedData && ((this.props.changedData.attributesData && this.props.changedData.attributesData.length>0) || (this.props.changedData.geometryData))) ?\n\t\t    <React.Fragment>\n\t\t    \t{(this.props.changedData.attributesData && this.props.changedData.attributesData.length>0) ? \n\t\t    \t<React.Fragment>\n\t    \t\t    <div className={'paPopupChangeType'}>The attributes have changed:</div>\n\t        \t\t<ReactTable \n\t                    className={'changeTable'}\n\t                    showPagination={false} \n\t                    minRows={0}\n\t                    data={this.props.changedData.attributesData}\n\t                    columns={[{ Header: 'Attribute', accessor: 'attribute',headerStyle: { 'textAlign': 'left' }}, { Header: this.props.fromVersion.title, accessor: 'previous',headerStyle: { 'textAlign': 'left' }, Cell: this.renderFrom.bind(this)}, { Header: this.props.toVersion.title, accessor: 'current',headerStyle: { 'textAlign': 'left' }, Cell: this.renderTo.bind(this)}]}\n\t        \t\t/> \n\t        \t</React.Fragment> : null}\n\t        \t{(this.props.changedData.geometryData) ? <div className={'geometryChangeDiv'}>{status && status.text}</div> : null}\n        \t</React.Fragment>\n    \t\t: null\n\t\t);\n\t}\n}\n\nexport default Changed;","import React from 'react';\nimport Changed from './Changed.js';\nimport Status from './Status.js';\nimport { getFeatureStatus } from './genericFunctions.js';\n\nconst TITLE_LINK = \"Click to open in the Protected Planet website\";\nconst URL_PP = \"https://www.protectedplanet.net/\";\n\nclass PAPopup extends React.Component {\n\tgetChangedData(feature){ //single feature under mouse\n\t\tlet attributesData =[];\n\t\tlet props = feature.properties;\n\t\t//check that the diff data has loaded\n\t\tif (this.props.country_pa_diffs.length === 0) return {};\n\t\t//get the data for the feature under the mouse\n\t\tlet pa_data = this.props.country_pa_diffs.find(pa => pa.wdpa_pid === props.wdpa_pid); \n\t\tif (pa_data === undefined) return\n\t\t//get the previous version of the feature either from the points layer of the polygons layer\n\t\tlet previous_feature;\n\t\tif (pa_data.geometry_change && pa_data.geometry_change === \"point to polygon\"){\n\t\t\tprevious_feature = this.props.map.querySourceFeatures(window.SRC_FROM_POINTS, {sourceLayer: \"wdpa_\" + pa_data.from + \"_points\", filter: [\"==\", \"wdpa_pid\", props.wdpa_pid]})[0];\n\t\t}else{\n\t\t\tprevious_feature = this.props.map.querySourceFeatures(window.SRC_FROM_POLYGONS, {sourceLayer: \"wdpa_\" + pa_data.from + \"_polygons\", filter: [\"==\", \"wdpa_pid\", props.wdpa_pid]})[0];\n\t\t}\n\t\t//attributes have changed - make an array of the data\n\t\tif (pa_data.attribute_change){\n\t\t\tpa_data.attribute_change.forEach((attribute) => {\n\t\t\t\tif (previous_feature){\n\t\t\t\t\tattributesData.push({attribute: attribute, previous: previous_feature.properties[attribute], current: props[attribute]});\n\t\t\t\t}else{\n\t\t\t\t\tattributesData.push({attribute: attribute, previous: 'changed in ' + pa_data.from, current: props[attribute]});\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\treturn {attributesData: attributesData, geometryData: pa_data.geometry_change};\n\t}\n\trender() {\n\t\tif (this.props.dataForPopup === undefined) return null;\n\t\tlet left = this.props.dataForPopup.point.x + 35 + 'px';\n\t\tlet top = this.props.dataForPopup.point.y - 25 + 'px';\n\t\tlet feature = this.props.dataForPopup.features[0];\n\t\tlet children, status=\"\", link;\n\t\tlink = <span className={\"ppLink underline\"}><a href={URL_PP + feature.properties.wdpa_pid} target='_blank'  rel=\"noopener noreferrer\" title={TITLE_LINK}>{feature.properties.wdpa_pid}</a></span>;\n\t\tstatus = getFeatureStatus(feature);\n\t\tswitch (status) {\n\t\t\tcase \"changed\":\n\t\t\t\tlet changedData = this.getChangedData(feature);\n\t\t\t\tchildren = <Changed statuses={this.props.statuses} changedData={changedData} fromVersion={this.props.fromVersion} toVersion={this.props.toVersion}/>;\n\t\t\t\tbreak;\n\t\t\tcase \"added\":\n\t\t\t\tchildren = <div className={'paPopupChangeType'}>Added in {this.props.toVersion.title}</div>;\n\t\t\t\tbreak;\n\t\t\tcase \"removed\":\n\t\t\t\tchildren = <div className={'paPopupChangeType'}>Removed in {this.props.toVersion.title}</div>;\n\t\t\t\tlink = <span className={\"ppLink\"}></span>;\n\t\t\t\tbreak;\n\t\t\tcase \"no_change\":\n\t\t\t\tif (this.props.dataForPopup.showingChange){\n\t\t\t\t\tchildren = <div className={'paPopupChangeType'}>No change</div>;\n\t\t\t\t}else{\n\t\t\t\t\tchildren = Object.keys(feature.properties).map(key=>{\n\t\t\t\t\t\treturn <tr><td>{key}</td><td>{feature.properties[key]}</td></tr>;\n\t\t\t\t\t});\n\t\t\t\t\tchildren = <table><tbody>{children}</tbody></table>;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\t//code\n\t\t}\n\t\treturn (\n\t\t\t<div style={{'left': left,'top':top}} id=\"popup\" className={'PAPopup'} onMouseEnter={this.props.onMouseEnterPAPopup} onMouseLeave={this.props.onMouseLeavePAPopup}>\n\t\t\t\t<div className={'wdpaPopup'}>\n\t\t\t\t\t<div className=\"paPopupName\">{(this.props.dataForPopup.showingChange) ? <Status status={status} iconOnly={true} rightPadding={3}/> : null }<span className={\"paPopupNameLeft\"}>{feature.properties.name}</span>{link}</div>\n\t\t\t\t\t<div className={'paPopupContent'}>\n\t\t\t\t\t\t{children}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default PAPopup;","import React from 'react';\nimport { getFeatureStatus } from './genericFunctions.js';\nimport Status from './Status.js';\n\nclass PAPopupList extends React.Component {\n\trender() {\n\t\tif (this.props.dataForPopupList === undefined) return null;\n\t\tlet children = [], status = \"\";\n\t\tlet left = this.props.dataForPopupList.point.x + 15 + 'px';\n\t\tlet top = this.props.dataForPopupList.point.y - 15 + 'px';\n\t\tchildren = this.props.dataForPopupList.features.map((feature) => {\n\t\t\tstatus = getFeatureStatus(feature);\n\t\t\treturn <tr className={'wdpaPopupListItem'} key={feature.properties.wdpa_pid} onMouseEnter={this.props.showPAPopup.bind(this, feature)}><td>{(status!=='removed') ? feature.properties.wdpa_pid : ''}</td><td>{(this.props.dataForPopupList.showingChange) ? <Status status={status} iconOnly={true}/> : null }</td><td>{feature.properties.name}</td><td></td><td>{feature.properties.desig}</td></tr>;\n\t\t});\n\t\tchildren = <table><tbody>{children}</tbody></table>;\n\t\treturn (\n\t\t\t<div style={{'left': left,'top':top}} id=\"popup\" className={'PAPopupList'} onMouseEnter={this.props.onMouseEnterPAPopuplist} onMouseLeave={this.props.onMouseLeavePAPopuplist}>\n\t\t\t\t<div className={'wdpaPopup'}>\n\t\t\t\t\t<div className={'paPopupName'}>{this.props.dataForPopupList.features.length} overlapping sites:</div>\n\t\t\t\t\t<div className={'paPopupContent'}>{children}</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default PAPopupList;","import React from 'react';\nimport 'rc-slider/assets/index.css';\nimport 'rc-tooltip/assets/bootstrap.css';\nimport Status from './Status.js';\nimport Slider from 'rc-slider';\nimport StatsBar from './StatsBar.js';\nimport SyncIcon from '@material-ui/icons/Sync';\nimport ZoomOutMap from '@material-ui/icons/Public';\nimport TimelineIcon from '@material-ui/icons/Timeline';\nimport IconButton from '@material-ui/core/IconButton';\nconst createSliderWithTooltip = Slider.createSliderWithTooltip;\nconst Range = createSliderWithTooltip(Slider.Range);\n\nclass AppBar extends React.Component {\n  zoomOutMap() {\n    this.props.zoomOutMap();\n  }\n  showTrends(){\n    this.props.showTrends();\n  }\n  onBeforeChange(values) {\n    this.props.onBeforeChange(values);\n  }\n  onChange(values) {\n    this.props.onChange(values, this.marks);\n  }\n  render() {\n    if (this.props.versions === undefined) return null;\n    //get the width of the slider depending on how many versions of the WDPA we have\n    let divisions = this.props.versions.length; //an extra division at the end\n    let width = (divisions * 60); //60px between each mark\n    //get the marks for the slider\n    this.marks = {};\n    this.props.versions.forEach(version => {\n      this.marks[version.id] = version.shortTitle;\n    });\n    return (\n      <React.Fragment>\n          <div className={'appBar'}>\n              <div>\n                  <div className={'appBarTitle noselect'}>WDPA Diff Checker</div>\n                  <div className={'appBarContent noselect'}>\n                      <div className={\"sliderContainer\"} title={'Press and hold SHIFT to move both at the same time'}>\n                          <div style={{ width: width, margin: 'auto' }}>\n                           <Range \n                              max={divisions}\n                              marks={this.marks} \n                              step={null}\n                              count={2} \n                              value={this.props.values}\n                              trackStyle={(this.props.shiftDown ? [{ backgroundColor: '#bbdbfa' }] : [{ backgroundColor: '#96dbfa' }])} \n                              handleStyle={[{ backgroundColor: '#96dbfa' }, { backgroundColor: 'white' }]}\n                              onBeforeChange={this.onBeforeChange.bind(this)}\n                              onChange={this.onChange.bind(this)}\n                              //  activeDotStyle={{borderColor: 'red', boxShadow: '0 0 5px #57c5f7', cursor: 'grabbing'}}\n                          />\n                          </div>\n                      </div>\n                      <div className={'statsHolder'}>\n                        <span className={'zoomOutHolder'}>\n                          <ZoomOutMap titleAccess={\"Return to full extent\"} className={'ZoomOutMap'} onClick={this.zoomOutMap.bind(this)}/>\n                        </span>\n                        <span className={'countryName'} style={{display: ((this.props.view === 'global') && (this.props.gettingCountryStats === false)) ? \"inline\" : \"none\"}}>Global</span>\n                        <span className={'vMiddle'} style={{display: ((this.props.values[0] === this.props.values[1]) && (this.props.view === 'global') && (this.props.gettingGlobalStats === false)) ? \"inline\" : \"none\"}}>\n                          <span><Status status={'total'} amount={this.props.globalTotal}/></span>\n                        </span>\n                        <span className={'vMiddle'} style={{display: ((this.props.values[0] !== this.props.values[1]) && (this.props.view === 'global') && (this.props.gettingGlobalStats === false)) ? \"inline\" : \"none\"}}>\n                          <StatsBar values={this.props.globalStats} showStatuses={this.props.showStatuses}/>\n                        </span>\n                        <span className={'countryName'} style={{display: ((this.props.view !== 'global') && (this.props.gettingCountryStats === false)) ? \"inline\" : \"none\"}}>{this.props.country && this.props.country.name}</span>\n                        <span className={'vMiddle'} style={{display: ((this.props.values[0] === this.props.values[1]) && (this.props.view !== 'global') && (this.props.gettingCountryStats === false)) ? \"inline\" : \"none\"}}>\n                          <Status status={'total'} amount={this.props.countryTotal}/>\n                        </span>\n                        <span className={'vMiddle'} style={{display: ((this.props.values[0] !== this.props.values[1]) && (this.props.view !== 'global') && (this.props.gettingCountryStats === false)) ? \"inline\" : \"none\"}}>\n                          <StatsBar values={this.props.countryStats} showStatuses={this.props.showStatuses}/>\n                        </span>\n                        <span className={'vMiddle'}>\n          \t              <SyncIcon className={'spin'} style={{display: (((this.props.gettingGlobalStats)||(this.props.gettingCountryStats)) ? 'inline' : 'none'),color: 'rgb(255, 64, 129)', fontSize:'17px'}} key={\"spinner\"}/>\n          \t            </span>\n                        <span className={'sparklineHolder'}>\n                          <IconButton aria-label=\"delete\" size=\"small\">\n                            <TimelineIcon titleAccess={\"View change over time\"} className={'viewTrends'} onClick={this.showTrends.bind(this)} style={{display: (this.props.view === 'global') ? \"inline\" : \"none\"}}/>\n                          </IconButton>\n                        </span>\n                      </div>\n                  </div>\n              </div>\n          </div>\n      </React.Fragment>\n    );\n  }\n}\n\nexport default AppBar;\n","import React from 'react';\nimport added from './added.png';\nimport removed from './removed.png';\nimport changed from './changed.png';\nimport point_to_polygon from './point_to_polygon.png';\nimport point_count_changed from './point_count_changed.png';\nimport geometry_shifted from './geometry_shifted.png';\nimport no_change from './no_change.png';\n\nclass StatusCheckbox extends React.Component {\n    handleStatusChange(e){\n        this.props.handleStatusChange(this.props.status);\n    }\n    render() {\n        let img;\n        switch (this.props.status.key) {\n            case 'added':\n                img = added;\n                break;\n            case 'removed':\n                img = removed;\n                break;\n            case 'changed':\n                img = changed;\n                break;\n            case 'point_to_polygon':\n                img = point_to_polygon;\n                break;\n            case 'point_count_changed':\n                img = point_count_changed;\n                break;\n            case 'geometry_shifted':\n                img = geometry_shifted;\n                break;\n            case 'no_change':\n                img = no_change;\n                break;\n            default:\n                // code\n        }\n        return (\n            <div className={'statusCheckboxContainer'}>\n                <img src={img} alt={this.props.status.text} title={this.props.status.text} className={\"statusImage\"}/>\n                <input className={'statusCheckbox'} id={this.props.status.key + 'id'} type=\"checkbox\" checked={this.props.status.visible} onChange={this.handleStatusChange.bind(this)}/>\n                <label for={this.props.status.key + 'id'}>{this.props.status.short_text}</label>\n            </div>\n        );\n    }\n}\n\nexport default StatusCheckbox;\n","import React from 'react';\nimport StatusCheckbox from './StatusCheckbox.js';\n\nclass FooterBar extends React.Component {\n    handleStatusChange(status) {\n        this.props.handleStatusChange(status);\n    }\n    render() {\n        let children = this.props.statuses.map(item=>{\n            return (item.present) ? <StatusCheckbox status={item} handleStatusChange={this.handleStatusChange.bind(this)} key={item.key}/> : null;\n        });\n        return (\n            <React.Fragment>\n                <div className={'footerBar'} style={{display: ((this.props.view === 'country') && (this.props.values[0] !== this.props.values[1])) ? 'flex' : 'none' }}>\n                    <div className={'footerBarTitle'}>Changes</div>\n                    <div className={'footerBarContent'}>\n                        <div style={{display: 'block'}}>\n                            {children}\n                        </div>\n                    </div>\n                </div>\n            </React.Fragment>\n        );\n    }\n}\n\nexport default FooterBar;\n","import React from 'react';\nimport { LineChart, Line,XAxis, YAxis,Tooltip  } from 'recharts';\n\nclass Trends extends React.Component {\n  tickFormatter(value){\n    return value.toLocaleString();\n  }\n  render() {\n    const renderLineChart = (\n      <LineChart width={300} height={200} data={this.props.global_trends}>\n        <Line type=\"monotone\" dataKey=\"sum\" stroke=\"#8884d8\" />\n        <XAxis dataKey=\"shortTitle\" label={{ value: \"Version\",  angle: 0,   dy: 15}}/>\n        <YAxis type=\"number\" domain={['auto', 'auto']} tickFormatter={this.tickFormatter.bind(this)} label={{ value: \"Count\", angle: -90,   dx: -30}}/>\n        <Tooltip />\n      </LineChart>\n    );    \n    return (\n      <React.Fragment>\n          <div className={'trends'} style={{display:(this.props.showTrends) ? \"block\" : \"none\"}}>{renderLineChart}\n          </div>\n      </React.Fragment>\n    );\n  }\n}\n\nexport default Trends;\n","/*global fetch*/\nimport React from 'react';\nimport './App.css';\nimport jsonp from 'jsonp-promise';\nimport geojson from './countries.json';\nimport MyMap from './MyMap.js';\nimport PAPopup from './PAPopup.js';\nimport PAPopupList from './PAPopupList.js';\nimport parse from 'color-parse';\nimport AppBar from './AppBar.js';\nimport FooterBar from './FooterBar.js';\nimport Trends from './Trends.js';\nimport dateFormat from 'dateformat';\n\n// const REST_BASE_URL = \"https://61c92e42cb1042699911c485c38d52ae.vfs.cloud9.eu-west-1.amazonaws.com/python-rest-server/pythonrestserver/services/\";\nconst REST_BASE_URL = \"https://rest-services.jrc.ec.europa.eu/services/marxan_vt/services/\";\n// const REST_BASE_URL = \"https://dopa-services.jrc.ec.europa.eu/services/marxan_vt/services/\";\nconst USE_SELECTION_COLOR = false; //set to true to disable the selection using the color of the polygon - it will use the P_SELECTION_ colors in MyMap.js\n//defines which layers will be highlighted when the mouse moves over the source layer - each layer in the highlight layers will be highlighted using the paint properties from the paintPropertyFrom layer\nlet hightlightRules = [\n  {sourceLayer: window.LYR_TO_NEW_POLYGON, highlightLayers: [{ layer: window.LYR_TO_SELECTED_POLYGON, paintPropertyFrom: window.LYR_TO_NEW_POLYGON}]},\n  {sourceLayer: window.LYR_TO_NEW_POINT, highlightLayers: [{ layer: window.LYR_TO_SELECTED_POINT, paintPropertyFrom: window.LYR_TO_NEW_POINT}]},\n  {sourceLayer: window.LYR_FROM_DELETED_POLYGON, highlightLayers: [{layer: window.LYR_FROM_SELECTED_POLYGON, paintPropertyFrom: window.LYR_FROM_DELETED_POLYGON}]},\n  {sourceLayer: window.LYR_FROM_DELETED_POINT, highlightLayers: [{ layer: window.LYR_FROM_SELECTED_POINT, paintPropertyFrom: window.LYR_FROM_DELETED_POINT}]},\n  {sourceLayer: window.LYR_TO_CHANGED_ATTRIBUTE, highlightLayers: [{layer: window.LYR_TO_SELECTED_POLYGON, paintPropertyFrom: window.LYR_TO_CHANGED_ATTRIBUTE}]},\n  {sourceLayer: window.LYR_TO_GEOMETRY_POINT_TO_POLYGON, highlightLayers: [{layer: window.LYR_FROM_SELECTED_POINT, paintPropertyFrom: window.LYR_FROM_GEOMETRY_POINT_TO_POLYGON},{layer: window.LYR_TO_SELECTED_POLYGON, paintPropertyFrom: window.LYR_TO_GEOMETRY_POINT_TO_POLYGON},{layer: window.LYR_TO_SELECTED_LINE, paintPropertyFrom: window.LYR_TO_GEOMETRY_POINT_TO_POLYGON_LINE}]},\n  {sourceLayer: window.LYR_TO_GEOMETRY_POINT_COUNT_CHANGED_POLYGON, highlightLayers: [{layer: window.LYR_FROM_SELECTED_LINE, paintPropertyFrom: window.LYR_FROM_GEOMETRY_POINT_COUNT_CHANGED_LINE},{layer: window.LYR_TO_SELECTED_POLYGON, paintPropertyFrom: window.LYR_TO_GEOMETRY_POINT_TO_POLYGON},{layer: window.LYR_TO_SELECTED_LINE, paintPropertyFrom: window.LYR_TO_GEOMETRY_POINT_TO_POLYGON_LINE}]},\n  {sourceLayer: window.LYR_TO_GEOMETRY_SHIFTED_POLYGON, highlightLayers: [{layer: window.LYR_FROM_SELECTED_LINE, paintPropertyFrom: window.LYR_FROM_GEOMETRY_POINT_COUNT_CHANGED_LINE},{layer: window.LYR_TO_SELECTED_POLYGON, paintPropertyFrom: window.LYR_TO_GEOMETRY_POINT_TO_POLYGON},{layer: window.LYR_TO_SELECTED_LINE, paintPropertyFrom: window.LYR_TO_GEOMETRY_POINT_TO_POLYGON_LINE}]},\n  {sourceLayer: window.LYR_TO_POLYGON, highlightLayers: [{ layer: window.LYR_TO_SELECTED_POLYGON, paintPropertyFrom: window.LYR_TO_POLYGON},{ layer: window.LYR_FROM_SELECTED_POINT, paintPropertyFrom: window.LYR_FROM_GEOMETRY_POINT_TO_POLYGON}]},\n  {sourceLayer: window.LYR_TO_POINT, highlightLayers: [{ layer: window.LYR_TO_SELECTED_POINT, paintPropertyFrom: window.LYR_TO_POINT}]}\n];\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { \n      global_summary: [],\n      country_summary: [],\n      country_pa_diffs: [],\n      globalStats: {},\n      countryStats: {},\n      showStatuses: ['added','removed','changed','no_change'], \n      view: 'global',\n      showTrends: false,\n      global_trends: [],\n      statuses: [\n        {key:\"added\", text:\"Added\", short_text:\"Added\", present: false, visible: true, layers:[window.LYR_TO_NEW_POLYGON, window.LYR_TO_NEW_POINT]},\n        {key:\"removed\", text:\"Removed\", short_text:\"Removed\", present: false, visible: true, layers:[window.LYR_FROM_DELETED_POLYGON, window.LYR_FROM_DELETED_POINT]},\n        {key:\"changed\", text:\"One or more attributes have changed\", short_text:\"Attribute change\", present: false, visible: true, layers:[window.LYR_TO_CHANGED_ATTRIBUTE]},\n        {key:\"point_to_polygon\", text:\"The boundary has changed from a point to a polygon\", short_text:\"Point to polygon\", present: false, visible: true, layers:[window.LYR_FROM_GEOMETRY_POINT_TO_POLYGON,window.LYR_TO_GEOMETRY_POINT_TO_POLYGON,window.LYR_TO_GEOMETRY_POINT_TO_POLYGON_LINE]},\n        {key:\"point_count_changed\", text:\"The boundary has changed\", short_text:\"Boundary change\", present: false, visible: true, layers:[window.LYR_FROM_GEOMETRY_POINT_COUNT_CHANGED_LINE,window.LYR_TO_GEOMETRY_POINT_COUNT_CHANGED_POLYGON,window.LYR_TO_GEOMETRY_POINT_COUNT_CHANGED_POLYGON_LINE]},\n        {key:\"geometry_shifted\", text:\"The boundary has moved\", short_text:\"Boundary moved\", present: false, visible: true, layers:[window.LYR_FROM_GEOMETRY_SHIFTED_LINE,window.LYR_TO_GEOMETRY_SHIFTED_POLYGON,window.LYR_TO_GEOMETRY_SHIFTED_POLYGON_LINE]},\n        {key:\"no_change\", text:\"No change\", short_text:\"No change\", present: false, visible: true, layers:[window.LYR_TO_POLYGON, window.LYR_TO_POINT]},\n        ], \n      versions: [],\n      fromVersion: undefined,\n      toVersion: undefined,\n      sliderValues: [0,1],\n      gettingGlobalStats: false,\n      gettingCountryStats: false,\n    };\n    this.shiftDown = false;\n    this.mouseOverPAPopup = false;\n    this.mouseOverPAPopuplist = false;\n    this.PAPopuptimer = []; \n    this.PAPopupListtimer = [];\n    this.wdpa_pidsUnderMouse = [];\n  }\n  componentDidMount(){\n    //get the wdpa versions\n    this.getVersions();\n    //add listeners for the keys to control dragging the slider\n    this.keyDownEventListener = this.handleKeyDown.bind(this);\n    document.addEventListener(\"keydown\", this.keyDownEventListener);\n    this.keyUpEventListener = this.handleKeyUp.bind(this);\n    document.addEventListener(\"keyup\", this.keyUpEventListener);\n  }\n  componentWillUnmount(){\n    //remove event listeners\n    document.removeEventListener(\"keydown\", this.keyDownEventListener);\n    document.removeEventListener(\"keyup\", this.keyUpEventListener);\n  }\n  mapStyleLoaded(){\n    this.initialBounds = this.map.getBounds();\n  }\n  //gets all the available versions of the WDPA from the first month we have data available\n  getVersions(){\n    this.getDateArray().then((dateArray) =>{\n      console.log(dateArray);\n      //only get the dates with valid wmts calls\n      dateArray = dateArray.filter(item=>item.wmtsValid);\n      //get the months and years between d1 and d2 (inclusive)\n      let versions = dateArray.map((item, index) => {\n        return {id: index, title: dateFormat(item._date, \"mmmm yyyy\"), shortTitle: dateFormat(item._date, \"mmm yy\"), key: dateFormat(item._date, \"mmm_yyyy\").toLowerCase(), year: dateFormat(item._date, \"yyyy\")};\n      });\n      this.setState({versions: versions, sliderValues:[versions.length, versions.length]}, () => {\n        this.setFromToVersions(versions.length - 1, versions.length - 1);  \n      });\n    });\n  }\n  getDateArray(){\n    return new Promise((resolve, reject) => {\n      //set the first date of the available data as 01/08/2019\n      let d = new Date(2019,7,1);\n      let today = new Date();\n      let dateArray = [];\n      let callCount = 0;\n      //iterate through the months until the date is greater than today\n      do{\n        dateArray.push({_date: new Date(d.getTime()), wmtsValid: false}); //clone the date\n        d = new Date(d.setMonth(d.getMonth()+1)); //increment the date by 1 month\n      }\n      while (d < today);\n      //iterate through the months and test the call to get the vector tiles - the test is a zoomed in area of morocco\n      dateArray.forEach((item, index) => {\n        let url = window.TILES_PREFIX + \"wdpa_\" + dateFormat(item._date, \"mmm_yyyy\").toLowerCase() + \"_polygons&tilematrixset=EPSG:900913&Service=WMTS&Request=GetTile&Version=1.0.0&Format=application/x-protobuf;type=mapbox-vector&TileMatrix=EPSG:900913:11&TileCol=986&TileRow=817\";\n        fetch(url).then(response => {\n          callCount = callCount + 1;\n          //if the call succeeds then add the date\n          if (response.status !== 400) item.wmtsValid = true;\n          //if all the calls have been made then resolve the promise\n          if (callCount === dateArray.length) resolve(dateArray);\n        });\n      });\n    });\n  }\n  //slider events\n  onBeforeChange(values){\n    this.prevMin = values[0];\n    this.prevMax = values[1];\n    this.prevDiff = values[1] - values[0];\n  }\n  onChange(values, marks){\n    let vals = Object.keys(marks);\n    if (this.shiftDown) {\n        //see if we are going up or down\n        if ((values[0] < this.prevMin) || (values[1] < this.prevMax)) { \n            if(values[1] - this.prevDiff < Number(vals[0])) return;\n            if (this.prevDiff === 0){\n              this.newMin = values[0] - this.prevDiff;\n              this.newMax = values[0];\n            }else{\n              this.newMin = values[1] - this.prevDiff;\n              this.newMax = values[1];\n            }\n        }else{ //going up\n            if(values[1] > Number(vals[vals.length - 1])) return;\n            this.newMin = values[1] - this.prevDiff;\n            this.newMax = values[1];\n        }\n        this.setSliderValues([this.newMin, this.newMax]);\n        this.prevMin = this.newMin;\n        this.prevMax = this.newMax;\n    }else{\n        this.setSliderValues(values);\n    }\n  }\n  setSliderValues(values){\n    //set the slider values\n    this.setState({sliderValues: values});\n    //set the from and to versions\n    this.setFromToVersions(values[0], values[1]);\n  }\n  //sets the from and to versions\n  setFromToVersions(_from, _to){\n    //check that the _from and _to are different - the onChange event on the slider is called repeatedly as it is moved\n    if ((this.state.fromVersion&&this.state.fromVersion.id === _from)&&(this.state.toVersion&&this.state.toVersion.id === _to)) return;\n    this.setState({fromVersion: this.state.versions[_from] , toVersion: this.state.versions[_to]});\n    //if from and to are the same then get the global totals\n    if (_from === _to) {\n      if (this.state.view === 'global') this.getGlobalTotal(_to);\n      if (this.state.view === 'country') {\n        this.showUnchanged(); //the user may have unchecked the no_change status when looking at diffs so we need to reset it\n        //get the total count of PAs for the version\n        this.getCountryTotal(_to);\n      }\n    }else{\n      if (this.state.view === 'global'){\n        //get the global totals for added, removed and changed\n        this.getGlobalDiffStats(_from, _to);\n        //get the country totals for added, removed and changed\n        this.getCountriesDiffStats(_from, _to);\n      }else{\n        //get the country summary, stats and diffs\n        this.getCountryDiffs();\n      }\n    }\n  }\n  handleKeyDown(e){\n    //if the Shift key is pressed then shiftDown property\n    if ((e.keyCode === 16) && (!(this.shiftDown))) this.shiftDown = true;\n    if (e.keyCode === 37) this.setSliderValues(([0,1])); //left arrow key\n    if (e.keyCode === 39) this.setSliderValues(([2,3])); //right arrow key\n  }\n  handleKeyUp(e){\n    this.shiftDown = false;\n  }\n  //the mapbox gl map is ready\n  mapReady(map){\n    this.map = map;\n    //add event handlers to the map\n    this.map.on(\"mousemove\", this.mouseMove.bind(this));\n  }\n  //gets the global count of protected areas for the version\n  getGlobalTotal(version){\n    this._get(REST_BASE_URL + \"get_global_total?version=\" + version + \"&format=json\").then(response => {\n      this.setState({globalTotal: response.records[0].total});\n    });\n  }\n  //gets the country count of protected areas for the version\n  getCountryTotal(version){\n    this.setState({gettingCountryStats: true});\n    this._get(REST_BASE_URL + \"get_country_total?version=\" + version + \"&iso3=\" + this.state.country.iso3 + \"&format=json\").then(response => {\n      this.setState({countryTotal: response.records[0].total});\n      this.setState({gettingCountryStats: false});\n    });\n  }\n  //gets the global stats for added, removed and changed for the versions\n  getGlobalDiffStats(_from, _to){\n    this.setState({gettingGlobalStats: true});\n    let restUrl = (_to - _from === 1) ? \"get_global_stats?version=\" + _to + \"&format=json\" : \"get_global_stats2?fromversion=\" + _from + \"&toversion=\" + _to + \"&format=json\";\n    this._get(REST_BASE_URL + restUrl).then(response => {\n      this.setState({globalStats: response.records[0], gettingGlobalStats: false});\n    });\n  }\n  //gets the countries stats for added, removed and changed for the versions\n  getCountriesDiffStats(_from, _to){\n    let countryData;\n    //get the country reference data from the cached geojson data\n    let centroids = JSON.parse(JSON.stringify(geojson));\n    //get the country statistics\n    let restUrl = (_to - _from === 1) ? \"get_countries_stats?version=\" + _to + \"&format=json\" : \"get_countries_stats2?fromversion=\" + _from + \"&toversion=\" + _to + \"&format=json\";\n    this._get(REST_BASE_URL + restUrl).then(response => {\n      let global_summary_all = response.records.map(country => {\n        //find the matching item from the countries.json array\n        countryData = centroids.features.find(feature => feature.properties.iso3 === country.iso3);\n        //merge the two objects\n        return (countryData) ? Object.assign(country, countryData.properties, { \"centroid\": countryData.geometry.coordinates }) : null;\n      });\n      //filter out the nulls\n      this.global_summary_all = global_summary_all.filter((item) => !(item === null));\n      //get the countries that are visible\n      let visibleCountries = this.global_summary_all.filter(country => {\n         return (this.isCountryVisible('added', country) || this.isCountryVisible('removed', country) || this.isCountryVisible('changed', country));  \n      });\n      //set the state - this creates the country popups on the map\n      this.setState({global_summary: visibleCountries});\n    });\n  }\n  //returns true if the country has protected areas with the passed status\n  isCountryVisible(status, country){\n    return (this.state.showStatuses.indexOf(status)!==-1)&&(country[status] > 0); \n  }\n  zoomOutMap(){\n    //zoom to the full extent\n    this.map.fitBounds(this.initialBounds,{ padding: { top: 10, bottom: 10, left: 10, right: 10 }, easing: (num) => { return 1 }});\n    //set the view back to global\n    this.setState({view: 'global'});\n    this.getCountriesDiffStats(this.state.fromVersion.id,this.state.toVersion.id);\n  }\n  showTrends(){\n    this.setState({showTrends: !this.state.showTrends});\n    this._get(REST_BASE_URL + \"get_global_trends?format=json\").then(response => {\n      //add the version short title\n      let global_trends =  response.records.map(item => {\n        let version = this.state.versions.filter(_version => _version.key === item.from)[0];\n        return Object.assign(item, version);\n      });\n      this.setState({global_trends: global_trends});\n    });\n  }\n  //makes a GET request and returns a promise which will either be resolved (passing the response) or rejected (passing the error)\n  _get(url, params) {\n    return new Promise((resolve, reject) => {\n      //set the global loading flag\n      jsonp(url).promise.then((response) => {\n        resolve(response);\n      }, (err) => {\n        reject(err);\n      });\n    });\n  }\n  //iterates through the country summary data and sets a flag in the status array if they are visible\n  setStatusPresence(records, iso3){\n    let _statuses = this.state.statuses;\n    let _presences = records.map(item=>{return item.status});\n    _statuses = _statuses.map(status => {\n      if (status.key !== \"no_change\"){\n        return Object.assign(status, {present: _presences.indexOf(status.key) !== -1});\n      }else{\n        //the no_change status is handled differently as we dont want to retrieve all wdpa_pids for a country which havent changed as this is lots of data, potentially, but we can get the no_change country statistics from the global summary\n        let global_summary_data = this.global_summary_all.find(item => { return item.iso3 === iso3});\n        let no_change_status = _statuses.find(item => item.key === 'no_change');\n        return Object.assign(no_change_status, {present: global_summary_data.no_change > 0});\n      }\n    });\n    this.setState({statuses: _statuses});\n  }\n  //manually show the no_change status layers if they are currently not visible\n  showUnchanged(){\n    let no_change_status = this.state.statuses.filter(status => status.key === 'no_change')[0];\n    if (!no_change_status.visible) this.handleStatusChange(no_change_status);\n  }\n  handleStatusChange(e){\n    let _statuses = this.state.statuses;\n    _statuses = _statuses.map(status => {\n      return Object.assign(status, {visible: (status.key === e.key) ? !status.visible : status.visible});\n    });\n    this.setState({statuses: _statuses});\n    //set the layer(s) visibility directly on the map (to avoid an update of the map state)  \n    e.layers.forEach(layer => {\n      this.map.setLayoutProperty(layer, \"visibility\", (e.visible) ? \"visible\" : \"none\" );\n    });\n  }\n  //fired when the user clicks on a country popup\n  clickCountryPopup(country) {\n    //set the bounds of the map\n    this.map.fitBounds([[country.west, country.south],[country.east,country.north]],{ padding: { top: 10, bottom: 10, left: 10, right: 10 }, easing: (num) => { return 1 }});\n    this.setState({country: country}, () => {\n      //get the country diffs\n      this.getCountryDiffs();\n    });\n  }\n  getCountryDiffs(){\n    //hide the country popups and set the view type\n    this.setState({global_summary:[], view: \"country\"}, () => {\n      //get the country stats\n      let restUrl = (this.state.toVersion.id - this.state.fromVersion.id === 1) ? \"get_country_stats?version=\" + this.state.toVersion.id : \"get_country_stats2?fromversion=\" + this.state.fromVersion.id + \"&toversion=\" + this.state.toVersion.id;\n      this._get(REST_BASE_URL + restUrl + \"&format=json&iso3=\" + this.state.country.iso3).then(response => {\n        this.setState({countryStats: response.records[0]});\n      });\n      restUrl = (this.state.toVersion.id - this.state.fromVersion.id === 1) ? \"get_country_summary?version=\" + this.state.toVersion.id : \"get_country_summary2?fromversion=\" + this.state.fromVersion.id + \"&toversion=\" + this.state.toVersion.id;\n      this._get(REST_BASE_URL + restUrl + \"&format=json&iso3=\" + this.state.country.iso3).then(response => {\n        //set the visibility of the statuses in the statuses array\n        this.setStatusPresence(response.records, this.state.country.iso3);\n        this.setState({country_summary: response.records});\n      });\n      //get the individual changes in the protected areas\n      restUrl = (this.state.toVersion.id - this.state.fromVersion.id === 1) ? \"get_country_diffs?version=\" + this.state.toVersion.id : \"get_country_diffs2?fromversion=\" + this.state.fromVersion.id + \"&toversion=\" + this.state.toVersion.id;\n      this._get(REST_BASE_URL + restUrl + \"&format=json&iso3=\" + this.state.country.iso3).then(response => {\n        if (response.records.length>0) this.setState({country_pa_diffs: response.records});\n      });\n    });\n  }\n  //gets the features under the cursor \n  mouseMove(e){\n    if (this.state.view === 'global') return; //dont show popups when at the global level\n    //get the layers to be queried\n    let showingChange = (this.state.sliderValues[0] !== this.state.sliderValues[1]);\n    let queryLayers = (showingChange) ? [window.LYR_FROM_DELETED_POLYGON, window.LYR_FROM_DELETED_POINT,window.LYR_TO_POLYGON, window.LYR_TO_POINT,window.LYR_TO_CHANGED_ATTRIBUTE, window.LYR_TO_GEOMETRY_POINT_TO_POLYGON,window.LYR_TO_GEOMETRY_POINT_COUNT_CHANGED_POLYGON,window.LYR_TO_GEOMETRY_SHIFTED_POLYGON,window.LYR_TO_NEW_POLYGON,window.LYR_TO_NEW_POINT] : [window.LYR_TO_POLYGON, window.LYR_TO_POINT];\n    var features = this.map.queryRenderedFeatures(e.point,{layers: queryLayers});\n    if (features.length>0) {\n      //remove any duplicate features (at the boundary between vector tiles there may be duplicates so remove them)\n      features = this.removeDuplicateFeatures(features, \"wdpa_pid\");\n      //get the unique wdpa_pids values \n      let wdpa_pids = features.map(feature => feature.properties.wdpa_pid);\n      //compare the wdpas with the previous features under the mouse to see if there are any differences\n      if (!this.arraysAreTheSame(wdpa_pids,this.wdpa_pidsUnderMouse)){\n        //if the mouse has moved over 1 or more new features then show them\n        this.onMouseEnter({point: e.point, features: features, showingChange: showingChange});\n        this.wdpa_pidsUnderMouse = wdpa_pids;\n      }\n    }else{\n      //no features under the cursor\n      this.clearPopups();\n    }\n  }\n  //gets unique features from an array of features based on the key property\n  removeDuplicateFeatures(arr, key){\n    let uniqueValues =[], uniqueFeatures = [];\n\t\tarr.forEach(feature=>{\n\t\t\tif (uniqueValues.indexOf(feature.properties[key]) === -1){\n\t\t\t\tuniqueFeatures.push(feature);\n\t\t\t\tuniqueValues.push(feature.properties[key]);\n\t\t\t}\n\t\t});\n    return uniqueFeatures;\n  }\n  //compares two arrays to see if they are the same\n  arraysAreTheSame(arr1, arr2){\n    //compare using a simple string conversion\n    return (arr1.join(\"\") === arr2.join(\"\")) ? true : false;\n  }\n  //mouse has entered one or more features\n  onMouseEnter(e){\n    if (this.state.view === 'global') return;\n    //if only one feature - show the PAPopup\n    if (e.features.length === 1) {\n      this.closePAPopuplist(0);\n      //clear any timers to close the PAPopup\n      this.PAPopuptimer.forEach(timer=>{ clearTimeout(timer)});\n      this.showPAPopup(e);\n    }else{ //show the PAPopuplist\n      this.closePAPopup(0);\n      //clear any timers to close the PAPopupList\n      this.PAPopupListtimer.forEach(timer=>{ clearTimeout(timer)});\n      this.showPAPopuplist(e);\n    }\n  }\n  clearPopups(){\n    //reset the local variable that has the wdpa_pids\n    this.wdpa_pidsUnderMouse = [];\n    //the PAPopupList is currently shown and we dont want to close it\n    if (this.state.dataForPopup && this.state.dataForPopup.features && this.state.dataForPopup.features.length >1) return; \n    //deselect features immediately \n    this.deselectFeatures();\n    //close the PAPopup\n    if (this.state.dataForPopup!== undefined) this.closePAPopup(400);\n  }\n  showPAPopup(e){\n    //highlight the feature\n    this.highlightFeature(e.features[0]);\n    //set the data for the popup\n    this.setState({dataForPopup:e});\n  }\n  showPAPopuplist(e){\n    //set the data for the popuplist\n    this.setState({dataForPopupList:e});\n  }\n  showPAPopupFromList(feature,  e){\n    this.showPAPopup({features:[feature], point:{x: e.clientX + 50, y: e.clientY}, showingChange: (this.state.sliderValues[0] !== this.state.sliderValues[1])});\n  }\n  closePAPopup(ms){\n    //wait for a bit before closing the popup - the user may want to interact with it\n    this.PAPopuptimer.push(setTimeout(()=>{\n      if (!this.mouseOverPAPopup) this.setState({dataForPopup: undefined});\n    }, ms));  \n  }\n  closePAPopuplist(ms){\n    this.PAPopupListtimer.push(setTimeout(()=>{\n      if (!this.mouseOverPAPopuplist) this.setState({dataForPopupList: undefined});\n    }, ms));            \n  }\n  onMouseEnterPAPopup(e){\n    this.mouseOverPAPopup = true;\n  }\n  onMouseLeavePAPopup(e){\n    this.mouseOverPAPopup = false;\n    //close the PAPopup\n    this.closePAPopup(0);\n  }\n  onMouseEnterPAPopuplist(e){\n    this.mouseOverPAPopuplist = true;\n  }\n  onMouseLeavePAPopuplist(e){\n    this.mouseOverPAPopuplist = false;\n    //close the PAPopup\n    this.closePAPopuplist(0);\n  }\n  highlightFeature(feature){\n    //reset the selected layers\n    this.deselectFeatures();\n    //get the rule for the layer  \n    let rule = hightlightRules.find(_rule => _rule.sourceLayer === feature.layer.id);\n    //iterate through the layers that need to be highlighted\n    rule.highlightLayers.forEach((item) => {\n      //set the filter on the highlightLayers\n      this.map.setFilter(item.layer, ['==','wdpa_pid', feature.properties.wdpa_pid]);\n      //increase the opacity\n      if (!USE_SELECTION_COLOR) this.increaseOpacity(item.paintPropertyFrom, item.layer);\n    });\n  }\n  //deselects all features \n  deselectFeatures(){\n    if ((this.map === undefined) || (this.map && !this.map.isStyleLoaded())) return;\n    if (this.state.fromVersion) this.map.setFilter(window.LYR_FROM_SELECTED_POINT, ['==','wdpa_pid', '-1']);              \n    if (this.state.fromVersion) this.map.setFilter(window.LYR_FROM_SELECTED_LINE, ['==','wdpa_pid', '-1']);              \n    if (this.state.fromVersion) this.map.setFilter(window.LYR_FROM_SELECTED_POLYGON, ['==','wdpa_pid', '-1']);              \n    this.map.setFilter(window.LYR_TO_SELECTED_POINT, ['==','wdpa_pid', '-1']);              \n    this.map.setFilter(window.LYR_TO_SELECTED_LINE, ['==','wdpa_pid', '-1']);              \n    this.map.setFilter(window.LYR_TO_SELECTED_POLYGON, ['==','wdpa_pid', '-1']);\n    //reset the selection color in the LYR_TO_SELECTED_POLYGON layer - too slow fades in slowly\n    // this.map.setPaintProperty(window.LYR_TO_SELECTED_POLYGON, \"fill-color\", \"rgba(0,0,0,0)\");\n  }\n  //gets the paint property from the passed source layer, clones it into the target layer but with an increase in opacity\n  increaseOpacity(sourceLayer, targetLayer, increaseBy = 0.1){\n    //get the paint property of the source layer\n    let paint = this.getPaintProperty(sourceLayer);\n    //iterate through the paint properties of the source layer and copy them to the target layer\n    Object.keys(paint).forEach(key=>{\n      let newValue = paint[key];\n      //increase the opacity in any rgba values\n      if ((typeof(paint[key]) === \"string\") && paint[key].indexOf(\"rgba\") !== -1){\n        let rgba = parse(paint[key]);\n        newValue = \"rgba(\" + rgba.values[0] + \",\" + rgba.values[1] + \",\" + rgba.values[2] + \",\" + this.getNewOpacity(rgba.alpha, increaseBy) + \")\";\n      }\n      //increase the opacity if the key contains the word opacity\n      if (key.indexOf(\"opacity\") !== -1) newValue = this.getNewOpacity(paint[key],increaseBy);\n      //dont change the fill outline opacity if the source layer is a changed geometry polygon - the fill outline should remain invisible as it will be shown in the geometry changed line layer\n      if (!((key === \"fill-outline-color\") && (sourceLayer === window.LYR_TO_GEOMETRY_POINT_TO_POLYGON || sourceLayer ===  window.LYR_TO_GEOMETRY_POINT_COUNT_CHANGED_POLYGON || sourceLayer === window.LYR_TO_GEOMETRY_SHIFTED_POLYGON))) this.map.setPaintProperty(targetLayer, key, newValue);\n    });\n  }\n  getNewOpacity(value, increaseBy){\n    return ((value + increaseBy)>1) ? 1 : value + increaseBy;\n  }\n  getPaintProperty(layerid){\n    let style = this.map.getStyle();\n    let layer = style.layers.find(layer => { return layer.id === layerid});\n    let paintProperty = (layer) ? layer.paint : {};\n    return paintProperty;\n  }\n\n  showAllNoChanges(_show){\n    let statuses = (_show) ? ['added','removed','changed'] : [];\n    this._showChanges(statuses);\n  }\n  showChangesWithStatus(status, _show){\n    let statuses = this.state.showStatuses;\n    if (_show){\n      statuses.push(status);  \n    }else{\n      statuses.pop(status);\n    }\n    this._showChanges(statuses);\n  }\n  _showChanges(statuses){\n    this.setState({showStatuses: statuses},() =>{\n      this.getVisibleCountries();  \n    });\n  }\n  render() {\n    return (\n      <React.Fragment>\n        <MyMap \n          setMap={this.mapReady.bind(this)}\n          mapStyleLoaded={this.mapStyleLoaded.bind(this)}\n          fromVersion={this.state.fromVersion} \n          toVersion={this.state.toVersion}\n          global_summary={this.state.global_summary}\n          country_summary={this.state.country_summary}\n          country={this.state.country}\n          showStatuses={this.state.showStatuses}\n          statuses={this.state.statuses}\n          clickCountryPopup={this.clickCountryPopup.bind(this)}\n          view={this.state.view}\n        />\n        <AppBar \n          versions={this.state.versions} \n          onBeforeChange={this.onBeforeChange.bind(this)} \n          onChange={this.onChange.bind(this)} \n          values={this.state.sliderValues} \n          zoomOutMap={this.zoomOutMap.bind(this)} \n          showTrends={this.showTrends.bind(this)}\n          showStatuses={this.state.showStatuses}\n          globalTotal={this.state.globalTotal} \n          globalStats={this.state.globalStats} \n          countryTotal={this.state.countryTotal}\n          countryStats={this.state.countryStats}\n          country={this.state.country}\n          view={this.state.view}\n          gettingGlobalStats={this.state.gettingGlobalStats}\n          gettingCountryStats={this.state.gettingCountryStats}\n        />\n        <Trends showTrends={this.state.showTrends} global_trends={this.state.global_trends}/>\n        <PAPopupList \n          dataForPopupList={this.state.dataForPopupList} \n          country_pa_diffs={this.state.country_pa_diffs} \n          map={this.map} \n          showPAPopup={this.showPAPopupFromList.bind(this)} \n          onMouseEnterPAPopuplist={this.onMouseEnterPAPopuplist.bind(this)} \n          onMouseLeavePAPopuplist={this.onMouseLeavePAPopuplist.bind(this)}\n        /> \n        <PAPopup \n          statuses={this.state.statuses} \n          dataForPopup={this.state.dataForPopup} \n          country_pa_diffs={this.state.country_pa_diffs} \n          map={this.map} \n          fromVersion={this.state.fromVersion} \n          toVersion={this.state.toVersion} \n          onMouseEnterPAPopup={this.onMouseEnterPAPopup.bind(this)} \n          onMouseLeavePAPopup={this.onMouseLeavePAPopup.bind(this)}\n        />\n        <FooterBar \n          view={this.state.view} \n          statuses={this.state.statuses} \n          values={this.state.sliderValues} \n          handleStatusChange={this.handleStatusChange.bind(this)}\n        />\n      </React.Fragment>\n    );\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","module.exports = {\n\tgetFeatureStatus: function(feature){\n\t\tlet status = \"\";\n\t\tswitch (feature.layer.id) {\n\t\t\tcase window.LYR_TO_CHANGED_ATTRIBUTE:\n\t\t\tcase window.LYR_TO_GEOMETRY_POINT_TO_POLYGON:\n\t\t\tcase window.LYR_TO_GEOMETRY_POINT_COUNT_CHANGED_POLYGON:\n\t\t\tcase window.LYR_TO_GEOMETRY_SHIFTED_POLYGON:\n\t\t\t\tstatus = \"changed\";\n\t\t\t\tbreak;\n\t\t\tcase window.LYR_TO_NEW_POLYGON:\n\t\t\tcase window.LYR_TO_NEW_POINT:\n\t\t\t\tstatus = \"added\";\n\t\t\t\tbreak;\n\t\t\tcase window.LYR_FROM_DELETED_POLYGON:\n\t\t\tcase window.LYR_FROM_DELETED_POINT:\n\t\t\t\tstatus = \"removed\";\n\t\t\t\tbreak;\n\t\t\tcase window.LYR_TO_POLYGON:\n\t\t\tcase window.LYR_TO_POINT:\n\t\t\t\tstatus = \"no_change\";\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\t//code\n\t\t}\n\t\treturn status;\n\t},\n};"],"sourceRoot":""}